{"ast":null,"code":"var _jsxFileName = \"/Users/Apple/Desktop/multi-agent-dsl-final/frontend/src/components/ReportSidebar.jsx\",\n  _s = $RefreshSig$();\n// frontend/src/components/ReportSidebar.jsx\nimport React, { useState, useEffect } from 'react';\nimport './ReportSidebar.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ReportSidebar = ({\n  events = [],\n  isOpen,\n  onClose,\n  onGenerateReport\n}) => {\n  _s();\n  const [reportData, setReportData] = useState(null);\n  const [isGenerating, setIsGenerating] = useState(false);\n\n  // 获取最近5次发送的事件\n  const getRecentSentEvents = () => {\n    const sentEventTypes = ['weather_alert', 'parking_update', 'safety_inspection', 'autonomous_driving'];\n    return events.filter(event => sentEventTypes.includes(event.type)).slice(-5).reverse(); // 最新的在前\n  };\n\n  // 获取与发送事件相关的智能体交互\n  const getAgentInteractions = sentEvent => {\n    if (!sentEvent || !sentEvent.timestamp) return [];\n    const sentTime = new Date(sentEvent.timestamp);\n    const timeWindow = 5 * 60 * 1000; // 5分钟时间窗口\n\n    const responseEventTypes = ['workflow_start', 'main_task_result', 'coordination_start', 'coordination_result', 'workflow_complete', 'agent_message', 'agent_response', 'analysis_report'];\n    return events.filter(event => {\n      if (!event || !event.timestamp) return false;\n      const eventTime = new Date(event.timestamp);\n      const timeDiff = Math.abs(eventTime.getTime() - sentTime.getTime());\n      return timeDiff <= timeWindow && responseEventTypes.includes(event.type) && event.type !== sentEvent.type;\n    }).sort((a, b) => new Date(a.timestamp) - new Date(b.timestamp));\n  };\n\n  // 获取所有报告\n  const getAllReports = () => {\n    const reports = events.filter(event => event.type === 'analysis_report');\n    console.log('📊 Found reports:', reports);\n    return reports;\n  };\n\n  // 生成报告\n  const handleGenerateReport = async () => {\n    setIsGenerating(true);\n    try {\n      await onGenerateReport();\n      // 等待报告生成完成\n      setTimeout(() => {\n        setIsGenerating(false);\n      }, 2000);\n    } catch (error) {\n      console.error('Error generating report:', error);\n      setIsGenerating(false);\n    }\n  };\n\n  // 获取事件图标\n  const getEventIcon = type => {\n    const icons = {\n      'workflow_start': '🚀',\n      'main_task_result': '👑',\n      'coordination_start': '🤝',\n      'coordination_result': '🎯',\n      'workflow_complete': '🏁',\n      'agent_message': '🤖',\n      'agent_response': '💬',\n      'analysis_report': '📊',\n      'weather_alert': '🌧️',\n      'parking_update': '🅿️',\n      'safety_inspection': '🛡️',\n      'autonomous_driving': '🚙',\n      'default': '📝'\n    };\n    return icons[type] || icons['default'];\n  };\n\n  // 获取事件类型标签\n  const getEventTypeLabel = type => {\n    const labels = {\n      'workflow_start': '工作流启动',\n      'main_task_result': '主智能体协调',\n      'coordination_start': '子智能体协调',\n      'coordination_result': '子智能体协同',\n      'workflow_complete': '工作流完成',\n      'agent_message': '智能体消息',\n      'agent_response': '智能体响应',\n      'analysis_report': '分析报告',\n      'weather_alert': '天气警报',\n      'parking_update': '停车更新',\n      'safety_inspection': '安全检查',\n      'autonomous_driving': '自动驾驶',\n      'default': '未知事件'\n    };\n    return labels[type] || labels['default'];\n  };\n\n  // 渲染智能体交互流程\n  const renderAgentInteractionFlow = interactions => {\n    if (interactions.length === 0) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"no-interactions\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"no-interactions-icon\",\n          children: \"\\u23F3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u7B49\\u5F85\\u667A\\u80FD\\u4F53\\u54CD\\u5E94...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"interaction-flow\",\n      children: interactions.map((interaction, index) => {\n        var _interaction$payload, _interaction$payload2;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"interaction-step\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"step-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"step-icon\",\n              children: getEventIcon(interaction.type)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"step-type\",\n              children: getEventTypeLabel(interaction.type)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"step-time\",\n              children: new Date(interaction.timestamp).toLocaleTimeString()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"step-content\",\n            children: interaction.type === 'agent_response' && (_interaction$payload = interaction.payload) !== null && _interaction$payload !== void 0 && _interaction$payload.agent ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"agent-response\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: [interaction.payload.agent, \":\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 19\n              }, this), \" \", interaction.payload.result]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 17\n            }, this) : interaction.type === 'coordination_result' ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"coordination-result\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"\\u534F\\u540C\\u5B8C\\u6210:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 19\n              }, this), \" \", ((_interaction$payload2 = interaction.payload) === null || _interaction$payload2 === void 0 ? void 0 : _interaction$payload2.total_agents) || 0, \"\\u4E2A\\u667A\\u80FD\\u4F53\\u54CD\\u5E94\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"step-message\",\n              children: typeof interaction.payload === 'string' ? interaction.payload : JSON.stringify(interaction.payload)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 13\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this);\n  };\n\n  // 渲染发送事件摘要\n  const renderSentEventSummary = event => {\n    if (!event || !event.payload) return '未知事件';\n    switch (event.type) {\n      case 'weather_alert':\n        return `区域: ${event.payload.area || '未知'} - 类型: ${event.payload.alert_type || '未知'}`;\n      case 'parking_update':\n        return `位置: ${event.payload.location || '未知'} - 可用车位: ${event.payload.available_spots || '未知'}`;\n      case 'safety_inspection':\n        return `位置: ${event.payload.location || '未知'} - 状态: ${event.payload.safety_status || '未知'}`;\n      case 'autonomous_driving':\n        return `起点: ${event.payload.start_location || '未知'} - 终点: ${event.payload.end_location || '未知'}`;\n      default:\n        return event.title || event.type;\n    }\n  };\n  const recentEvents = getRecentSentEvents();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `report-sidebar ${isOpen ? 'open' : ''}`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sidebar-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"sidebar-title\",\n        children: \"\\uD83D\\uDCCA \\u667A\\u80FD\\u4F53\\u4EA4\\u4E92\\u62A5\\u544A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"close-btn\",\n        onClick: onClose,\n        children: \"\\u2715\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sidebar-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"report-controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"generate-report-btn\",\n          onClick: handleGenerateReport,\n          disabled: isGenerating || recentEvents.length === 0,\n          children: isGenerating ? '🔄 生成中...' : '📄 生成综合报告'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"report-hint\",\n          children: [\"\\u57FA\\u4E8E\\u6700\\u8FD1 \", recentEvents.length, \" \\u6B21\\u53D1\\u9001\\u4E8B\\u4EF6\\u751F\\u6210\\u62A5\\u544A\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"recent-events-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"section-title\",\n          children: \"\\uD83D\\uDCE4 \\u6700\\u8FD1\\u53D1\\u9001\\u4E8B\\u4EF6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }, this), recentEvents.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"empty-state\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"empty-icon\",\n            children: \"\\uD83D\\uDCED\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\u6682\\u65E0\\u53D1\\u9001\\u4E8B\\u4EF6\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"empty-subtext\",\n            children: \"\\u53D1\\u9001\\u4EFB\\u52A1\\u4EE5\\u67E5\\u770B\\u4EA4\\u4E92\\u8BB0\\u5F55\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"events-list\",\n          children: recentEvents.map((event, index) => {\n            const interactions = getAgentInteractions(event);\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"event-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"event-header\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"event-icon\",\n                  children: getEventIcon(event.type)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 211,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"event-info\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"event-title\",\n                    children: getEventTypeLabel(event.type)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 213,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"event-time\",\n                    children: new Date(event.timestamp).toLocaleString()\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 214,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 212,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"event-summary\",\n                children: renderSentEventSummary(event)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"agent-interactions\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"interactions-header\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"interactions-title\",\n                    children: \"\\uD83E\\uDD16 \\u667A\\u80FD\\u4F53\\u4EA4\\u4E92\\u8BB0\\u5F55\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 227,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"interactions-count\",\n                    children: [interactions.length, \" \\u4E2A\\u54CD\\u5E94\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 228,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 226,\n                  columnNumber: 23\n                }, this), renderAgentInteractionFlow(interactions)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 21\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"reports-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"section-title\",\n          children: \"\\uD83D\\uDCCA \\u751F\\u6210\\u7684\\u62A5\\u544A\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 11\n        }, this), getAllReports().length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"empty-state\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"empty-icon\",\n            children: \"\\uD83D\\uDCC4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\u6682\\u65E0\\u751F\\u6210\\u7684\\u62A5\\u544A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"empty-subtext\",\n            children: \"\\u70B9\\u51FB\\\"\\u751F\\u6210\\u7EFC\\u5408\\u62A5\\u544A\\\"\\u6309\\u94AE\\u521B\\u5EFA\\u62A5\\u544A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"reports-list\",\n          children: getAllReports().map((report, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"report-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"report-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"report-icon\",\n                children: \"\\uD83D\\uDCCA\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"report-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"report-title\",\n                  children: report.title || '城市分析报告'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 257,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"report-time\",\n                  children: new Date(report.timestamp).toLocaleString()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 258,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"report-content\",\n              children: report.payload && report.payload.report ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"report-text\",\n                children: report.payload.report.split('\\n').map((line, lineIndex) => /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"report-paragraph\",\n                  children: line\n                }, lineIndex, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 267,\n                  columnNumber: 27\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 265,\n                columnNumber: 23\n              }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"report-text\",\n                children: \"\\u62A5\\u544A\\u5185\\u5BB9\\u52A0\\u8F7D\\u4E2D...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 271,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 19\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stats-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"section-title\",\n          children: \"\\uD83D\\uDCC8 \\u7EDF\\u8BA1\\u4FE1\\u606F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stats-grid\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-value\",\n              children: recentEvents.length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-label\",\n              children: \"\\u53D1\\u9001\\u4E8B\\u4EF6\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-value\",\n              children: recentEvents.reduce((sum, event) => sum + getAgentInteractions(event).length, 0)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-label\",\n              children: \"\\u667A\\u80FD\\u4F53\\u54CD\\u5E94\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-value\",\n              children: getAllReports().length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-label\",\n              children: \"\\u751F\\u6210\\u62A5\\u544A\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 174,\n    columnNumber: 5\n  }, this);\n};\n_s(ReportSidebar, \"rEqyqy7ZEaAN7Ukz9uY6qFX7jGM=\");\n_c = ReportSidebar;\nexport default ReportSidebar;\nvar _c;\n$RefreshReg$(_c, \"ReportSidebar\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","ReportSidebar","events","isOpen","onClose","onGenerateReport","_s","reportData","setReportData","isGenerating","setIsGenerating","getRecentSentEvents","sentEventTypes","filter","event","includes","type","slice","reverse","getAgentInteractions","sentEvent","timestamp","sentTime","Date","timeWindow","responseEventTypes","eventTime","timeDiff","Math","abs","getTime","sort","a","b","getAllReports","reports","console","log","handleGenerateReport","setTimeout","error","getEventIcon","icons","getEventTypeLabel","labels","renderAgentInteractionFlow","interactions","length","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","interaction","index","_interaction$payload","_interaction$payload2","toLocaleTimeString","payload","agent","result","total_agents","JSON","stringify","renderSentEventSummary","area","alert_type","location","available_spots","safety_status","start_location","end_location","title","recentEvents","onClick","disabled","toLocaleString","report","split","line","lineIndex","reduce","sum","_c","$RefreshReg$"],"sources":["/Users/Apple/Desktop/multi-agent-dsl-final/frontend/src/components/ReportSidebar.jsx"],"sourcesContent":["// frontend/src/components/ReportSidebar.jsx\nimport React, { useState, useEffect } from 'react';\nimport './ReportSidebar.css';\n\nconst ReportSidebar = ({ events = [], isOpen, onClose, onGenerateReport }) => {\n  const [reportData, setReportData] = useState(null);\n  const [isGenerating, setIsGenerating] = useState(false);\n\n  // 获取最近5次发送的事件\n  const getRecentSentEvents = () => {\n    const sentEventTypes = ['weather_alert', 'parking_update', 'safety_inspection', 'autonomous_driving'];\n    return events\n      .filter(event => sentEventTypes.includes(event.type))\n      .slice(-5)\n      .reverse(); // 最新的在前\n  };\n\n  // 获取与发送事件相关的智能体交互\n  const getAgentInteractions = (sentEvent) => {\n    if (!sentEvent || !sentEvent.timestamp) return [];\n    \n    const sentTime = new Date(sentEvent.timestamp);\n    const timeWindow = 5 * 60 * 1000; // 5分钟时间窗口\n    \n    const responseEventTypes = [\n      'workflow_start',\n      'main_task_result', \n      'coordination_start',\n      'coordination_result',\n      'workflow_complete',\n      'agent_message',\n      'agent_response',\n      'analysis_report'\n    ];\n    \n    return events.filter(event => {\n      if (!event || !event.timestamp) return false;\n      \n      const eventTime = new Date(event.timestamp);\n      const timeDiff = Math.abs(eventTime.getTime() - sentTime.getTime());\n      \n      return timeDiff <= timeWindow && \n             responseEventTypes.includes(event.type) && \n             event.type !== sentEvent.type;\n    }).sort((a, b) => new Date(a.timestamp) - new Date(b.timestamp));\n  };\n\n  // 获取所有报告\n  const getAllReports = () => {\n    const reports = events.filter(event => event.type === 'analysis_report');\n    console.log('📊 Found reports:', reports);\n    return reports;\n  };\n\n  // 生成报告\n  const handleGenerateReport = async () => {\n    setIsGenerating(true);\n    try {\n      await onGenerateReport();\n      // 等待报告生成完成\n      setTimeout(() => {\n        setIsGenerating(false);\n      }, 2000);\n    } catch (error) {\n      console.error('Error generating report:', error);\n      setIsGenerating(false);\n    }\n  };\n\n  // 获取事件图标\n  const getEventIcon = (type) => {\n    const icons = {\n      'workflow_start': '🚀',\n      'main_task_result': '👑',\n      'coordination_start': '🤝',\n      'coordination_result': '🎯',\n      'workflow_complete': '🏁',\n      'agent_message': '🤖',\n      'agent_response': '💬',\n      'analysis_report': '📊',\n      'weather_alert': '🌧️',\n      'parking_update': '🅿️',\n      'safety_inspection': '🛡️',\n      'autonomous_driving': '🚙',\n      'default': '📝'\n    };\n    return icons[type] || icons['default'];\n  };\n\n  // 获取事件类型标签\n  const getEventTypeLabel = (type) => {\n    const labels = {\n      'workflow_start': '工作流启动',\n      'main_task_result': '主智能体协调',\n      'coordination_start': '子智能体协调',\n      'coordination_result': '子智能体协同',\n      'workflow_complete': '工作流完成',\n      'agent_message': '智能体消息',\n      'agent_response': '智能体响应',\n      'analysis_report': '分析报告',\n      'weather_alert': '天气警报',\n      'parking_update': '停车更新',\n      'safety_inspection': '安全检查',\n      'autonomous_driving': '自动驾驶',\n      'default': '未知事件'\n    };\n    return labels[type] || labels['default'];\n  };\n\n  // 渲染智能体交互流程\n  const renderAgentInteractionFlow = (interactions) => {\n    if (interactions.length === 0) {\n      return (\n        <div className=\"no-interactions\">\n          <div className=\"no-interactions-icon\">⏳</div>\n          <p>等待智能体响应...</p>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"interaction-flow\">\n        {interactions.map((interaction, index) => (\n          <div key={index} className=\"interaction-step\">\n            <div className=\"step-header\">\n              <span className=\"step-icon\">{getEventIcon(interaction.type)}</span>\n              <span className=\"step-type\">{getEventTypeLabel(interaction.type)}</span>\n              <span className=\"step-time\">\n                {new Date(interaction.timestamp).toLocaleTimeString()}\n              </span>\n            </div>\n            <div className=\"step-content\">\n              {interaction.type === 'agent_response' && interaction.payload?.agent ? (\n                <div className=\"agent-response\">\n                  <strong>{interaction.payload.agent}:</strong> {interaction.payload.result}\n                </div>\n              ) : interaction.type === 'coordination_result' ? (\n                <div className=\"coordination-result\">\n                  <strong>协同完成:</strong> {interaction.payload?.total_agents || 0}个智能体响应\n                </div>\n              ) : (\n                <div className=\"step-message\">\n                  {typeof interaction.payload === 'string' ? interaction.payload : JSON.stringify(interaction.payload)}\n                </div>\n              )}\n            </div>\n          </div>\n        ))}\n      </div>\n    );\n  };\n\n  // 渲染发送事件摘要\n  const renderSentEventSummary = (event) => {\n    if (!event || !event.payload) return '未知事件';\n    \n    switch (event.type) {\n      case 'weather_alert':\n        return `区域: ${event.payload.area || '未知'} - 类型: ${event.payload.alert_type || '未知'}`;\n      case 'parking_update':\n        return `位置: ${event.payload.location || '未知'} - 可用车位: ${event.payload.available_spots || '未知'}`;\n      case 'safety_inspection':\n        return `位置: ${event.payload.location || '未知'} - 状态: ${event.payload.safety_status || '未知'}`;\n      case 'autonomous_driving':\n        return `起点: ${event.payload.start_location || '未知'} - 终点: ${event.payload.end_location || '未知'}`;\n      default:\n        return event.title || event.type;\n    }\n  };\n\n  const recentEvents = getRecentSentEvents();\n\n  return (\n    <div className={`report-sidebar ${isOpen ? 'open' : ''}`}>\n      <div className=\"sidebar-header\">\n        <h2 className=\"sidebar-title\">📊 智能体交互报告</h2>\n        <button className=\"close-btn\" onClick={onClose}>✕</button>\n      </div>\n\n      <div className=\"sidebar-content\">\n        {/* 报告生成按钮 */}\n        <div className=\"report-controls\">\n          <button \n            className=\"generate-report-btn\"\n            onClick={handleGenerateReport}\n            disabled={isGenerating || recentEvents.length === 0}\n          >\n            {isGenerating ? '🔄 生成中...' : '📄 生成综合报告'}\n          </button>\n          <p className=\"report-hint\">\n            基于最近 {recentEvents.length} 次发送事件生成报告\n          </p>\n        </div>\n\n        {/* 最近发送事件列表 */}\n        <div className=\"recent-events-section\">\n          <h3 className=\"section-title\">📤 最近发送事件</h3>\n          {recentEvents.length === 0 ? (\n            <div className=\"empty-state\">\n              <div className=\"empty-icon\">📭</div>\n              <p>暂无发送事件</p>\n              <p className=\"empty-subtext\">发送任务以查看交互记录</p>\n            </div>\n          ) : (\n            <div className=\"events-list\">\n              {recentEvents.map((event, index) => {\n                const interactions = getAgentInteractions(event);\n                return (\n                  <div key={index} className=\"event-item\">\n                    <div className=\"event-header\">\n                      <span className=\"event-icon\">{getEventIcon(event.type)}</span>\n                      <div className=\"event-info\">\n                        <div className=\"event-title\">{getEventTypeLabel(event.type)}</div>\n                        <div className=\"event-time\">\n                          {new Date(event.timestamp).toLocaleString()}\n                        </div>\n                      </div>\n                    </div>\n                    \n                    <div className=\"event-summary\">\n                      {renderSentEventSummary(event)}\n                    </div>\n\n                    {/* 智能体交互记录 */}\n                    <div className=\"agent-interactions\">\n                      <div className=\"interactions-header\">\n                        <span className=\"interactions-title\">🤖 智能体交互记录</span>\n                        <span className=\"interactions-count\">\n                          {interactions.length} 个响应\n                        </span>\n                      </div>\n                      {renderAgentInteractionFlow(interactions)}\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          )}\n        </div>\n\n        {/* 生成的报告 */}\n        <div className=\"reports-section\">\n          <h3 className=\"section-title\">📊 生成的报告</h3>\n          {getAllReports().length === 0 ? (\n            <div className=\"empty-state\">\n              <div className=\"empty-icon\">📄</div>\n              <p>暂无生成的报告</p>\n              <p className=\"empty-subtext\">点击\"生成综合报告\"按钮创建报告</p>\n            </div>\n          ) : (\n            <div className=\"reports-list\">\n              {getAllReports().map((report, index) => (\n                <div key={index} className=\"report-item\">\n                  <div className=\"report-header\">\n                    <span className=\"report-icon\">📊</span>\n                    <div className=\"report-info\">\n                      <div className=\"report-title\">{report.title || '城市分析报告'}</div>\n                      <div className=\"report-time\">\n                        {new Date(report.timestamp).toLocaleString()}\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"report-content\">\n                    {report.payload && report.payload.report ? (\n                      <div className=\"report-text\">\n                        {report.payload.report.split('\\n').map((line, lineIndex) => (\n                          <p key={lineIndex} className=\"report-paragraph\">{line}</p>\n                        ))}\n                      </div>\n                    ) : (\n                      <p className=\"report-text\">报告内容加载中...</p>\n                    )}\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n\n        {/* 统计信息 */}\n        <div className=\"stats-section\">\n          <h3 className=\"section-title\">📈 统计信息</h3>\n          <div className=\"stats-grid\">\n            <div className=\"stat-item\">\n              <div className=\"stat-value\">{recentEvents.length}</div>\n              <div className=\"stat-label\">发送事件</div>\n            </div>\n            <div className=\"stat-item\">\n              <div className=\"stat-value\">\n                {recentEvents.reduce((sum, event) => sum + getAgentInteractions(event).length, 0)}\n              </div>\n              <div className=\"stat-label\">智能体响应</div>\n            </div>\n            <div className=\"stat-item\">\n              <div className=\"stat-value\">{getAllReports().length}</div>\n              <div className=\"stat-label\">生成报告</div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ReportSidebar;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}