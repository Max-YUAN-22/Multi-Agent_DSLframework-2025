{"ast":null,"code":"import{useState,useEffect,createContext,useContext}from'react';import{zh}from'../locales/zh';import{en}from'../locales/en';// è¯­è¨€é…ç½®\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const languages={zh:{name:'ä¸­æ–‡',flag:'ðŸ‡¨ðŸ‡³',data:zh},en:{name:'English',flag:'ðŸ‡ºðŸ‡¸',data:en}};// åˆ›å»ºè¯­è¨€ä¸Šä¸‹æ–‡\nconst LanguageContext=/*#__PURE__*/createContext();// è¯­è¨€æä¾›è€…ç»„ä»¶\nexport const LanguageProvider=_ref=>{let{children}=_ref;const[currentLanguage,setCurrentLanguage]=useState(()=>{// ä»ŽlocalStorageèŽ·å–ä¿å­˜çš„è¯­è¨€è®¾ç½®ï¼Œé»˜è®¤ä¸ºä¸­æ–‡\nconst saved=localStorage.getItem('preferred-language');return saved&&languages[saved]?saved:'zh';});const[t,setT]=useState(languages[currentLanguage].data);// åˆ‡æ¢è¯­è¨€\nconst changeLanguage=lang=>{if(languages[lang]){console.log('Changing language to:',lang);setCurrentLanguage(lang);setT(languages[lang].data);localStorage.setItem('preferred-language',lang);}};// èŽ·å–å½“å‰è¯­è¨€ä¿¡æ¯\nconst getCurrentLanguageInfo=()=>{return{code:currentLanguage,name:languages[currentLanguage].name,flag:languages[currentLanguage].flag};};// èŽ·å–æ‰€æœ‰å¯ç”¨è¯­è¨€\nconst getAvailableLanguages=()=>{return Object.keys(languages).map(code=>({code,name:languages[code].name,flag:languages[code].flag}));};const value={t,currentLanguage,changeLanguage,getCurrentLanguageInfo,getAvailableLanguages};return/*#__PURE__*/_jsx(LanguageContext.Provider,{value:value,children:children});};// ä½¿ç”¨è¯­è¨€çš„Hook\nexport const useTranslation=()=>{const context=useContext(LanguageContext);if(!context){throw new Error('useTranslation must be used within a LanguageProvider');}return context;};// è¯­è¨€åˆ‡æ¢ç»„ä»¶\nexport const LanguageSwitcher=()=>{var _availableLanguages$f,_availableLanguages$f2;const{currentLanguage,changeLanguage,getAvailableLanguages}=useTranslation();const[isOpen,setIsOpen]=useState(false);const availableLanguages=getAvailableLanguages();// ç‚¹å‡»å¤–éƒ¨å…³é—­ä¸‹æ‹‰èœå•\nuseEffect(()=>{const handleClickOutside=event=>{if(isOpen&&!event.target.closest('.language-switcher')){setIsOpen(false);}};document.addEventListener('mousedown',handleClickOutside);return()=>{document.removeEventListener('mousedown',handleClickOutside);};},[isOpen]);return/*#__PURE__*/_jsxs(\"div\",{className:\"language-switcher\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"language-switcher-button\",onClick:()=>setIsOpen(!isOpen),title:\"\\u5207\\u6362\\u8BED\\u8A00 / Switch Language\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"language-flag\",children:(_availableLanguages$f=availableLanguages.find(lang=>lang.code===currentLanguage))===null||_availableLanguages$f===void 0?void 0:_availableLanguages$f.flag}),/*#__PURE__*/_jsx(\"span\",{className:\"language-name\",children:(_availableLanguages$f2=availableLanguages.find(lang=>lang.code===currentLanguage))===null||_availableLanguages$f2===void 0?void 0:_availableLanguages$f2.name}),/*#__PURE__*/_jsx(\"span\",{className:\"language-arrow\",children:\"\\u25BC\"})]}),isOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"language-dropdown\",children:availableLanguages.map(lang=>/*#__PURE__*/_jsxs(\"button\",{className:\"language-option \".concat(lang.code===currentLanguage?'active':''),onClick:()=>{console.log('Changing language to:',lang.code);changeLanguage(lang.code);setIsOpen(false);},children:[/*#__PURE__*/_jsx(\"span\",{className:\"language-flag\",children:lang.flag}),/*#__PURE__*/_jsx(\"span\",{className:\"language-name\",children:lang.name})]},lang.code))})]});};","map":{"version":3,"names":["useState","useEffect","createContext","useContext","zh","en","jsx","_jsx","jsxs","_jsxs","languages","name","flag","data","LanguageContext","LanguageProvider","_ref","children","currentLanguage","setCurrentLanguage","saved","localStorage","getItem","t","setT","changeLanguage","lang","console","log","setItem","getCurrentLanguageInfo","code","getAvailableLanguages","Object","keys","map","value","Provider","useTranslation","context","Error","LanguageSwitcher","_availableLanguages$f","_availableLanguages$f2","isOpen","setIsOpen","availableLanguages","handleClickOutside","event","target","closest","document","addEventListener","removeEventListener","className","onClick","title","find","concat"],"sources":["/Users/Apple/Desktop/multi-agent-dsl-final/frontend/src/hooks/useTranslation.js"],"sourcesContent":["import { useState, useEffect, createContext, useContext } from 'react';\nimport { zh } from '../locales/zh';\nimport { en } from '../locales/en';\n\n// è¯­è¨€é…ç½®\nconst languages = {\n  zh: { name: 'ä¸­æ–‡', flag: 'ðŸ‡¨ðŸ‡³', data: zh },\n  en: { name: 'English', flag: 'ðŸ‡ºðŸ‡¸', data: en }\n};\n\n// åˆ›å»ºè¯­è¨€ä¸Šä¸‹æ–‡\nconst LanguageContext = createContext();\n\n// è¯­è¨€æä¾›è€…ç»„ä»¶\nexport const LanguageProvider = ({ children }) => {\n  const [currentLanguage, setCurrentLanguage] = useState(() => {\n    // ä»ŽlocalStorageèŽ·å–ä¿å­˜çš„è¯­è¨€è®¾ç½®ï¼Œé»˜è®¤ä¸ºä¸­æ–‡\n    const saved = localStorage.getItem('preferred-language');\n    return saved && languages[saved] ? saved : 'zh';\n  });\n\n  const [t, setT] = useState(languages[currentLanguage].data);\n\n  // åˆ‡æ¢è¯­è¨€\n  const changeLanguage = (lang) => {\n    if (languages[lang]) {\n      console.log('Changing language to:', lang);\n      setCurrentLanguage(lang);\n      setT(languages[lang].data);\n      localStorage.setItem('preferred-language', lang);\n    }\n  };\n\n  // èŽ·å–å½“å‰è¯­è¨€ä¿¡æ¯\n  const getCurrentLanguageInfo = () => {\n    return {\n      code: currentLanguage,\n      name: languages[currentLanguage].name,\n      flag: languages[currentLanguage].flag\n    };\n  };\n\n  // èŽ·å–æ‰€æœ‰å¯ç”¨è¯­è¨€\n  const getAvailableLanguages = () => {\n    return Object.keys(languages).map(code => ({\n      code,\n      name: languages[code].name,\n      flag: languages[code].flag\n    }));\n  };\n\n  const value = {\n    t,\n    currentLanguage,\n    changeLanguage,\n    getCurrentLanguageInfo,\n    getAvailableLanguages\n  };\n\n  return (\n    <LanguageContext.Provider value={value}>\n      {children}\n    </LanguageContext.Provider>\n  );\n};\n\n// ä½¿ç”¨è¯­è¨€çš„Hook\nexport const useTranslation = () => {\n  const context = useContext(LanguageContext);\n  if (!context) {\n    throw new Error('useTranslation must be used within a LanguageProvider');\n  }\n  return context;\n};\n\n// è¯­è¨€åˆ‡æ¢ç»„ä»¶\nexport const LanguageSwitcher = () => {\n  const { currentLanguage, changeLanguage, getAvailableLanguages } = useTranslation();\n  const [isOpen, setIsOpen] = useState(false);\n  const availableLanguages = getAvailableLanguages();\n\n  // ç‚¹å‡»å¤–éƒ¨å…³é—­ä¸‹æ‹‰èœå•\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (isOpen && !event.target.closest('.language-switcher')) {\n        setIsOpen(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [isOpen]);\n\n  return (\n    <div className=\"language-switcher\">\n      <button \n        className=\"language-switcher-button\"\n        onClick={() => setIsOpen(!isOpen)}\n        title=\"åˆ‡æ¢è¯­è¨€ / Switch Language\"\n      >\n        <span className=\"language-flag\">\n          {availableLanguages.find(lang => lang.code === currentLanguage)?.flag}\n        </span>\n        <span className=\"language-name\">\n          {availableLanguages.find(lang => lang.code === currentLanguage)?.name}\n        </span>\n        <span className=\"language-arrow\">â–¼</span>\n      </button>\n      \n      {isOpen && (\n        <div className=\"language-dropdown\">\n          {availableLanguages.map(lang => (\n            <button\n              key={lang.code}\n              className={`language-option ${lang.code === currentLanguage ? 'active' : ''}`}\n              onClick={() => {\n                console.log('Changing language to:', lang.code);\n                changeLanguage(lang.code);\n                setIsOpen(false);\n              }}\n            >\n              <span className=\"language-flag\">{lang.flag}</span>\n              <span className=\"language-name\">{lang.name}</span>\n            </button>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}