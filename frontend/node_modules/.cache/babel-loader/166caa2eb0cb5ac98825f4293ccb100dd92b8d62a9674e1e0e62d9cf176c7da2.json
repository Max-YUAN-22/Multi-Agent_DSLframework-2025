{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useRef, useState } from 'react';\nconst useWebSocket = (url, onMessage) => {\n  _s();\n  const socket = useRef(null);\n  const interval = useRef(null);\n  const [readyState, setReadyState] = useState(WebSocket.CONNECTING);\n  useEffect(() => {\n    socket.current = new WebSocket(url);\n    setReadyState(WebSocket.CONNECTING);\n    const sendPing = () => {\n      if (socket.current && socket.current.readyState === WebSocket.OPEN) {\n        socket.current.send(JSON.stringify({\n          type: 'ping'\n        }));\n      }\n    };\n    socket.current.onopen = () => {\n      setReadyState(WebSocket.OPEN);\n      interval.current = setInterval(sendPing, 30000);\n    };\n    socket.current.onmessage = event => {\n      try {\n        const message = JSON.parse(event.data);\n        if (message.type === 'ping') {\n          if (socket.current && socket.current.readyState === WebSocket.OPEN) {\n            socket.current.send(JSON.stringify({\n              type: 'pong'\n            }));\n          }\n        } else {\n          onMessage(message);\n        }\n      } catch (error) {\n        console.error('Error parsing WebSocket message:', error);\n      }\n    };\n    socket.current.onclose = event => {\n      console.log('WebSocket disconnected. Code:', event.code, 'Reason:', event.reason, 'Was Clean:', event.wasClean);\n      setReadyState(WebSocket.CLOSED);\n      clearInterval(interval.current);\n    };\n    socket.current.onerror = error => {\n      console.error('WebSocket error:', error);\n      setReadyState(WebSocket.CLOSED);\n    };\n    return () => {\n      if (socket.current) {\n        socket.current.close();\n      }\n      clearInterval(interval.current);\n    };\n  }, [url, onMessage]);\n  const sendMessage = message => {\n    if (socket.current && socket.current.readyState === WebSocket.OPEN) {\n      socket.current.send(JSON.stringify(message));\n    } else {\n      console.error('WebSocket is not connected.');\n    }\n  };\n  return {\n    sendMessage,\n    readyState\n  };\n};\n_s(useWebSocket, \"rDHOz8FT/4mCW9xgAgOIeXroo2k=\");\nexport default useWebSocket;","map":{"version":3,"names":["useEffect","useRef","useState","useWebSocket","url","onMessage","_s","socket","interval","readyState","setReadyState","WebSocket","CONNECTING","current","sendPing","OPEN","send","JSON","stringify","type","onopen","setInterval","onmessage","event","message","parse","data","error","console","onclose","log","code","reason","wasClean","CLOSED","clearInterval","onerror","close","sendMessage"],"sources":["/Users/Apple/Desktop/multi-agent-dsl-final/frontend/src/hooks/useWebSocket.js"],"sourcesContent":["import { useEffect, useRef, useState } from 'react';\n\nconst useWebSocket = (url, onMessage) => {\n  const socket = useRef(null);\n  const interval = useRef(null);\n  const [readyState, setReadyState] = useState(WebSocket.CONNECTING);\n\n  useEffect(() => {\n    socket.current = new WebSocket(url);\n    setReadyState(WebSocket.CONNECTING);\n\n    const sendPing = () => {\n      if (socket.current && socket.current.readyState === WebSocket.OPEN) {\n        socket.current.send(JSON.stringify({ type: 'ping' }));\n      }\n    };\n\n    socket.current.onopen = () => {\n      setReadyState(WebSocket.OPEN);\n      interval.current = setInterval(sendPing, 30000);\n    };\n\n    socket.current.onmessage = (event) => {\n      try {\n        const message = JSON.parse(event.data);\n        if (message.type === 'ping') {\n          if (socket.current && socket.current.readyState === WebSocket.OPEN) {\n            socket.current.send(JSON.stringify({ type: 'pong' }));\n          }\n        } else {\n          onMessage(message);\n        }\n      } catch (error) {\n        console.error('Error parsing WebSocket message:', error);\n      }\n    };\n\n    socket.current.onclose = (event) => {\n      console.log('WebSocket disconnected. Code:', event.code, 'Reason:', event.reason, 'Was Clean:', event.wasClean);\n      setReadyState(WebSocket.CLOSED);\n      clearInterval(interval.current);\n    };\n\n    socket.current.onerror = (error) => {\n      console.error('WebSocket error:', error);\n      setReadyState(WebSocket.CLOSED);\n    };\n\n    return () => {\n      if (socket.current) {\n        socket.current.close();\n      }\n      clearInterval(interval.current);\n    };\n  }, [url, onMessage]);\n\n  const sendMessage = (message) => {\n    if (socket.current && socket.current.readyState === WebSocket.OPEN) {\n      socket.current.send(JSON.stringify(message));\n    } else {\n      console.error('WebSocket is not connected.');\n    }\n  };\n\n  return { sendMessage, readyState };\n};\n\nexport default useWebSocket;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}