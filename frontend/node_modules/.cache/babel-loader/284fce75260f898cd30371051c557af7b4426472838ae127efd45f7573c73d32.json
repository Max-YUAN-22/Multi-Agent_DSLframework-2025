{"ast":null,"code":"import{useEffect,useRef,useState}from'react';const useWebSocket=(url,onMessage)=>{const socket=useRef(null);const[readyState,setReadyState]=useState(WebSocket.CONNECTING);useEffect(()=>{if(!socket.current){socket.current=new WebSocket(url);setReadyState(WebSocket.CONNECTING);socket.current.onopen=()=>{setReadyState(WebSocket.OPEN);};socket.current.onmessage=event=>{try{const message=JSON.parse(event.data);if(message.type==='ping'){if(socket.current&&socket.current.readyState===WebSocket.OPEN){socket.current.send(JSON.stringify({type:'pong'}));}}else{onMessage(message);}}catch(error){console.error('Error parsing WebSocket message:',error);}};socket.current.onclose=event=>{console.log('WebSocket disconnected:',event);setReadyState(WebSocket.CLOSED);};socket.current.onerror=error=>{console.error('WebSocket error:',error);setReadyState(WebSocket.CLOSED);};}return()=>{if(socket.current){socket.current.close();socket.current=null;}};},[url,onMessage]);const sendMessage=message=>{if(socket.current&&socket.current.readyState===WebSocket.OPEN){socket.current.send(JSON.stringify(message));}else{console.error('WebSocket is not connected.');}};return{sendMessage,readyState};};export default useWebSocket;","map":{"version":3,"names":["useEffect","useRef","useState","useWebSocket","url","onMessage","socket","readyState","setReadyState","WebSocket","CONNECTING","current","onopen","OPEN","onmessage","event","message","JSON","parse","data","type","send","stringify","error","console","onclose","log","CLOSED","onerror","close","sendMessage"],"sources":["/Users/Apple/Desktop/multi-agent-dsl-final/frontend/src/hooks/useWebSocket.js"],"sourcesContent":["import { useEffect, useRef, useState } from 'react';\n\nconst useWebSocket = (url, onMessage) => {\n  const socket = useRef(null);\n  const [readyState, setReadyState] = useState(WebSocket.CONNECTING);\n\n  useEffect(() => {\n    if (!socket.current) {\n      socket.current = new WebSocket(url);\n      setReadyState(WebSocket.CONNECTING);\n\n      socket.current.onopen = () => {\n        setReadyState(WebSocket.OPEN);\n      };\n\n      socket.current.onmessage = (event) => {\n        try {\n          const message = JSON.parse(event.data);\n          if (message.type === 'ping') {\n            if (socket.current && socket.current.readyState === WebSocket.OPEN) {\n              socket.current.send(JSON.stringify({ type: 'pong' }));\n            }\n          } else {\n            onMessage(message);\n          }\n        } catch (error) {\n          console.error('Error parsing WebSocket message:', error);\n        }\n      };\n\n      socket.current.onclose = (event) => {\n        console.log('WebSocket disconnected:', event);\n        setReadyState(WebSocket.CLOSED);\n      };\n\n      socket.current.onerror = (error) => {\n        console.error('WebSocket error:', error);\n        setReadyState(WebSocket.CLOSED);\n      };\n    }\n\n    return () => {\n      if (socket.current) {\n        socket.current.close();\n        socket.current = null;\n      }\n    };\n  }, [url, onMessage]);\n\n  const sendMessage = (message) => {\n    if (socket.current && socket.current.readyState === WebSocket.OPEN) {\n      socket.current.send(JSON.stringify(message));\n    } else {\n      console.error('WebSocket is not connected.');\n    }\n  };\n\n  return { sendMessage, readyState };\n};\n\nexport default useWebSocket;"],"mappings":"AAAA,OAASA,SAAS,CAAEC,MAAM,CAAEC,QAAQ,KAAQ,OAAO,CAEnD,KAAM,CAAAC,YAAY,CAAGA,CAACC,GAAG,CAAEC,SAAS,GAAK,CACvC,KAAM,CAAAC,MAAM,CAAGL,MAAM,CAAC,IAAI,CAAC,CAC3B,KAAM,CAACM,UAAU,CAAEC,aAAa,CAAC,CAAGN,QAAQ,CAACO,SAAS,CAACC,UAAU,CAAC,CAElEV,SAAS,CAAC,IAAM,CACd,GAAI,CAACM,MAAM,CAACK,OAAO,CAAE,CACnBL,MAAM,CAACK,OAAO,CAAG,GAAI,CAAAF,SAAS,CAACL,GAAG,CAAC,CACnCI,aAAa,CAACC,SAAS,CAACC,UAAU,CAAC,CAEnCJ,MAAM,CAACK,OAAO,CAACC,MAAM,CAAG,IAAM,CAC5BJ,aAAa,CAACC,SAAS,CAACI,IAAI,CAAC,CAC/B,CAAC,CAEDP,MAAM,CAACK,OAAO,CAACG,SAAS,CAAIC,KAAK,EAAK,CACpC,GAAI,CACF,KAAM,CAAAC,OAAO,CAAGC,IAAI,CAACC,KAAK,CAACH,KAAK,CAACI,IAAI,CAAC,CACtC,GAAIH,OAAO,CAACI,IAAI,GAAK,MAAM,CAAE,CAC3B,GAAId,MAAM,CAACK,OAAO,EAAIL,MAAM,CAACK,OAAO,CAACJ,UAAU,GAAKE,SAAS,CAACI,IAAI,CAAE,CAClEP,MAAM,CAACK,OAAO,CAACU,IAAI,CAACJ,IAAI,CAACK,SAAS,CAAC,CAAEF,IAAI,CAAE,MAAO,CAAC,CAAC,CAAC,CACvD,CACF,CAAC,IAAM,CACLf,SAAS,CAACW,OAAO,CAAC,CACpB,CACF,CAAE,MAAOO,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,kCAAkC,CAAEA,KAAK,CAAC,CAC1D,CACF,CAAC,CAEDjB,MAAM,CAACK,OAAO,CAACc,OAAO,CAAIV,KAAK,EAAK,CAClCS,OAAO,CAACE,GAAG,CAAC,yBAAyB,CAAEX,KAAK,CAAC,CAC7CP,aAAa,CAACC,SAAS,CAACkB,MAAM,CAAC,CACjC,CAAC,CAEDrB,MAAM,CAACK,OAAO,CAACiB,OAAO,CAAIL,KAAK,EAAK,CAClCC,OAAO,CAACD,KAAK,CAAC,kBAAkB,CAAEA,KAAK,CAAC,CACxCf,aAAa,CAACC,SAAS,CAACkB,MAAM,CAAC,CACjC,CAAC,CACH,CAEA,MAAO,IAAM,CACX,GAAIrB,MAAM,CAACK,OAAO,CAAE,CAClBL,MAAM,CAACK,OAAO,CAACkB,KAAK,CAAC,CAAC,CACtBvB,MAAM,CAACK,OAAO,CAAG,IAAI,CACvB,CACF,CAAC,CACH,CAAC,CAAE,CAACP,GAAG,CAAEC,SAAS,CAAC,CAAC,CAEpB,KAAM,CAAAyB,WAAW,CAAId,OAAO,EAAK,CAC/B,GAAIV,MAAM,CAACK,OAAO,EAAIL,MAAM,CAACK,OAAO,CAACJ,UAAU,GAAKE,SAAS,CAACI,IAAI,CAAE,CAClEP,MAAM,CAACK,OAAO,CAACU,IAAI,CAACJ,IAAI,CAACK,SAAS,CAACN,OAAO,CAAC,CAAC,CAC9C,CAAC,IAAM,CACLQ,OAAO,CAACD,KAAK,CAAC,6BAA6B,CAAC,CAC9C,CACF,CAAC,CAED,MAAO,CAAEO,WAAW,CAAEvB,UAAW,CAAC,CACpC,CAAC,CAED,cAAe,CAAAJ,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}