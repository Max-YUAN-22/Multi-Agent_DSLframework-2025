{"ast":null,"code":"var _process$env$REACT_AP;\n// frontend/src/services/WebSocketService.js\nconst API_BASE = ((_process$env$REACT_AP = process.env.REACT_APP_API_BASE) === null || _process$env$REACT_AP === void 0 ? void 0 : _process$env$REACT_AP.replace(/\\/+$/, \"\")) || \"http://127.0.0.1:8000\";\nconst WS_URL = API_BASE.replace(\"http\", \"ws\") + \"/ws\";\nclass WebSocketService {\n  constructor() {\n    this.socket = null;\n    this.onMessage = null;\n  }\n  connect() {\n    this.socket = new WebSocket(WS_URL);\n    this.socket.onopen = () => {\n      console.log(\"WebSocket connected\");\n    };\n    this.socket.onmessage = event => {\n      const data = JSON.parse(event.data);\n      if (data.type === \"ping\") {\n        this.socket.send(JSON.stringify({\n          type: \"pong\"\n        }));\n        return;\n      }\n      if (this.onMessage) {\n        this.onMessage(data);\n      }\n    };\n    this.socket.onclose = () => {\n      console.log(\"WebSocket disconnected. Attempting to reconnect...\");\n      setTimeout(() => this.connect(), 1000);\n    };\n    this.socket.onerror = error => {\n      console.error(\"WebSocket error:\", error);\n      this.socket.close();\n    };\n  }\n  setOnMessageHandler(handler) {\n    this.onMessage = handler;\n  }\n  disconnect() {\n    if (this.socket) {\n      this.socket.close();\n    }\n  }\n}\nconst webSocketService = new WebSocketService();\nexport default webSocketService;","map":{"version":3,"names":["API_BASE","_process$env$REACT_AP","process","env","REACT_APP_API_BASE","replace","WS_URL","WebSocketService","constructor","socket","onMessage","connect","WebSocket","onopen","console","log","onmessage","event","data","JSON","parse","type","send","stringify","onclose","setTimeout","onerror","error","close","setOnMessageHandler","handler","disconnect","webSocketService"],"sources":["/Users/Apple/Desktop/multi-agent-dsl-final/frontend/src/services/WebSocketService.js"],"sourcesContent":["// frontend/src/services/WebSocketService.js\nconst API_BASE = process.env.REACT_APP_API_BASE?.replace(/\\/+$/, \"\") || \"http://127.0.0.1:8000\";\nconst WS_URL = API_BASE.replace(\"http\", \"ws\") + \"/ws\";\n\nclass WebSocketService {\n  constructor() {\n    this.socket = null;\n    this.onMessage = null;\n  }\n\n  connect() {\n    this.socket = new WebSocket(WS_URL);\n\n    this.socket.onopen = () => {\n      console.log(\"WebSocket connected\");\n    };\n\n    this.socket.onmessage = (event) => {\n      const data = JSON.parse(event.data);\n      if (data.type === \"ping\") {\n        this.socket.send(JSON.stringify({ type: \"pong\" }));\n        return;\n      }\n      if (this.onMessage) {\n        this.onMessage(data);\n      }\n    };\n\n    this.socket.onclose = () => {\n      console.log(\"WebSocket disconnected. Attempting to reconnect...\");\n      setTimeout(() => this.connect(), 1000);\n    };\n\n    this.socket.onerror = (error) => {\n      console.error(\"WebSocket error:\", error);\n      this.socket.close();\n    };\n  }\n\n  setOnMessageHandler(handler) {\n    this.onMessage = handler;\n  }\n\n  disconnect() {\n    if (this.socket) {\n      this.socket.close();\n    }\n  }\n}\n\nconst webSocketService = new WebSocketService();\nexport default webSocketService;"],"mappings":";AAAA;AACA,MAAMA,QAAQ,GAAG,EAAAC,qBAAA,GAAAC,OAAO,CAACC,GAAG,CAACC,kBAAkB,cAAAH,qBAAA,uBAA9BA,qBAAA,CAAgCI,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,KAAI,uBAAuB;AAC/F,MAAMC,MAAM,GAAGN,QAAQ,CAACK,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,GAAG,KAAK;AAErD,MAAME,gBAAgB,CAAC;EACrBC,WAAWA,CAAA,EAAG;IACZ,IAAI,CAACC,MAAM,GAAG,IAAI;IAClB,IAAI,CAACC,SAAS,GAAG,IAAI;EACvB;EAEAC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACF,MAAM,GAAG,IAAIG,SAAS,CAACN,MAAM,CAAC;IAEnC,IAAI,CAACG,MAAM,CAACI,MAAM,GAAG,MAAM;MACzBC,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC;IACpC,CAAC;IAED,IAAI,CAACN,MAAM,CAACO,SAAS,GAAIC,KAAK,IAAK;MACjC,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACH,KAAK,CAACC,IAAI,CAAC;MACnC,IAAIA,IAAI,CAACG,IAAI,KAAK,MAAM,EAAE;QACxB,IAAI,CAACZ,MAAM,CAACa,IAAI,CAACH,IAAI,CAACI,SAAS,CAAC;UAAEF,IAAI,EAAE;QAAO,CAAC,CAAC,CAAC;QAClD;MACF;MACA,IAAI,IAAI,CAACX,SAAS,EAAE;QAClB,IAAI,CAACA,SAAS,CAACQ,IAAI,CAAC;MACtB;IACF,CAAC;IAED,IAAI,CAACT,MAAM,CAACe,OAAO,GAAG,MAAM;MAC1BV,OAAO,CAACC,GAAG,CAAC,oDAAoD,CAAC;MACjEU,UAAU,CAAC,MAAM,IAAI,CAACd,OAAO,CAAC,CAAC,EAAE,IAAI,CAAC;IACxC,CAAC;IAED,IAAI,CAACF,MAAM,CAACiB,OAAO,GAAIC,KAAK,IAAK;MAC/Bb,OAAO,CAACa,KAAK,CAAC,kBAAkB,EAAEA,KAAK,CAAC;MACxC,IAAI,CAAClB,MAAM,CAACmB,KAAK,CAAC,CAAC;IACrB,CAAC;EACH;EAEAC,mBAAmBA,CAACC,OAAO,EAAE;IAC3B,IAAI,CAACpB,SAAS,GAAGoB,OAAO;EAC1B;EAEAC,UAAUA,CAAA,EAAG;IACX,IAAI,IAAI,CAACtB,MAAM,EAAE;MACf,IAAI,CAACA,MAAM,CAACmB,KAAK,CAAC,CAAC;IACrB;EACF;AACF;AAEA,MAAMI,gBAAgB,GAAG,IAAIzB,gBAAgB,CAAC,CAAC;AAC/C,eAAeyB,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}