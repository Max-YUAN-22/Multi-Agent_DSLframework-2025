{"ast":null,"code":"// frontend/src/components/InteractionHistory.jsx\nimport React from'react';import'./InteractionHistory.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const InteractionHistory=_ref=>{let{events,onClear,readyState}=_ref;const getStatusPill=()=>{switch(readyState){case WebSocket.CONNECTING:return/*#__PURE__*/_jsx(\"span\",{className:\"pill pill-status-connecting\",children:\"Connecting...\"});case WebSocket.OPEN:return/*#__PURE__*/_jsx(\"span\",{className:\"pill pill-status-open\",children:\"Connected\"});case WebSocket.CLOSING:return/*#__PURE__*/_jsx(\"span\",{className:\"pill pill-status-closing\",children:\"Closing...\"});case WebSocket.CLOSED:return/*#__PURE__*/_jsx(\"span\",{className:\"pill pill-status-closed\",children:\"Service Unavailable\"});default:return/*#__PURE__*/_jsx(\"span\",{className:\"pill pill-status-closed\",children:\"Service Unavailable\"});}};const renderEvent=event=>{var _event$payload;switch(event.type){case'traffic_incident':return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"history__line\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"pill\",children:event.title}),/*#__PURE__*/_jsx(\"span\",{className:\"loc\",children:event.payload.location})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"history__meta\",children:[/*#__PURE__*/_jsx(\"span\",{children:event.at}),/*#__PURE__*/_jsx(\"span\",{children:event.payload.description}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Severity: \",event.payload.severity]})]})]},event.id);case'report_response':return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"history__line\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"pill pill-report\",children:\"Report\"}),/*#__PURE__*/_jsx(\"span\",{className:\"loc\",children:((_event$payload=event.payload)===null||_event$payload===void 0?void 0:_event$payload.location)||'City Analysis'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"history__meta\",children:[/*#__PURE__*/_jsx(\"span\",{children:event.at}),/*#__PURE__*/_jsx(\"div\",{className:\"report-content\",children:event.report.split('\\n').map((line,i)=>/*#__PURE__*/_jsx(\"p\",{children:line},i))})]})]},event.id);default:return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"history__line\",children:/*#__PURE__*/_jsx(\"span\",{className:\"pill\",children:event.title||'Unknown Event'})}),/*#__PURE__*/_jsxs(\"div\",{className:\"history__meta\",children:[/*#__PURE__*/_jsx(\"span\",{children:event.at}),/*#__PURE__*/_jsx(\"pre\",{children:JSON.stringify(event.payload,null,2)})]})]},event.id);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"interaction-record card\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"h2\",{className:\"card__title\",children:\"Interaction History\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center'},children:[getStatusPill(),/*#__PURE__*/_jsx(\"button\",{onClick:onClear,className:\"clear-btn\",style:{marginLeft:'1rem'},children:\"Clear History\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"history-scroll\",children:events.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"muted\",children:\"No records yet. Send a module to see the history.\"}):/*#__PURE__*/_jsx(\"ul\",{className:\"history\",children:events.map(event=>renderEvent(event))})})]});};export default InteractionHistory;","map":{"version":3,"names":["React","jsx","_jsx","jsxs","_jsxs","InteractionHistory","_ref","events","onClear","readyState","getStatusPill","WebSocket","CONNECTING","className","children","OPEN","CLOSING","CLOSED","renderEvent","event","_event$payload","type","title","payload","location","at","description","severity","id","report","split","map","line","i","JSON","stringify","style","display","justifyContent","alignItems","onClick","marginLeft","length"],"sources":["/Users/Apple/Desktop/multi-agent-dsl-final/frontend/src/components/InteractionHistory.jsx"],"sourcesContent":["// frontend/src/components/InteractionHistory.jsx\nimport React from 'react';\nimport './InteractionHistory.css';\n\nconst InteractionHistory = ({ events, onClear, readyState }) => {\n  const getStatusPill = () => {\n    switch (readyState) {\n      case WebSocket.CONNECTING:\n        return <span className=\"pill pill-status-connecting\">Connecting...</span>;\n      case WebSocket.OPEN:\n        return <span className=\"pill pill-status-open\">Connected</span>;\n      case WebSocket.CLOSING:\n        return <span className=\"pill pill-status-closing\">Closing...</span>;\n      case WebSocket.CLOSED:\n        return <span className=\"pill pill-status-closed\">Service Unavailable</span>;\n      default:\n        return <span className=\"pill pill-status-closed\">Service Unavailable</span>;\n    }\n  };\n\n  const renderEvent = (event) => {\n    switch (event.type) {\n      case 'traffic_incident':\n        return (\n          <li key={event.id}>\n            <div className=\"history__line\">\n              <span className=\"pill\">{event.title}</span>\n              <span className=\"loc\">{event.payload.location}</span>\n            </div>\n            <div className=\"history__meta\">\n              <span>{event.at}</span>\n              <span>{event.payload.description}</span>\n              <span>Severity: {event.payload.severity}</span>\n            </div>\n          </li>\n        );\n      case 'report_response':\n        return (\n          <li key={event.id}>\n            <div className=\"history__line\">\n              <span className=\"pill pill-report\">Report</span>\n              <span className=\"loc\">{event.payload?.location || 'City Analysis'}</span>\n            </div>\n            <div className=\"history__meta\">\n              <span>{event.at}</span>\n              <div className=\"report-content\">\n                {event.report.split('\\n').map((line, i) => (\n                  <p key={i}>{line}</p>\n                ))}\n              </div>\n            </div>\n          </li>\n        );\n      default:\n        return (\n          <li key={event.id}>\n            <div className=\"history__line\">\n              <span className=\"pill\">{event.title || 'Unknown Event'}</span>\n            </div>\n            <div className=\"history__meta\">\n              <span>{event.at}</span>\n              <pre>{JSON.stringify(event.payload, null, 2)}</pre>\n            </div>\n          </li>\n        );\n    }\n  };\n\n  return (\n    <div className=\"interaction-record card\">\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n        <h2 className=\"card__title\">Interaction History</h2>\n        <div style={{ display: 'flex', alignItems: 'center' }}>\n          {getStatusPill()}\n          <button onClick={onClear} className=\"clear-btn\" style={{ marginLeft: '1rem' }}>Clear History</button>\n        </div>\n      </div>\n      <div className=\"history-scroll\">\n        {events.length === 0 ? (\n          <p className=\"muted\">No records yet. Send a module to see the history.</p>\n        ) : (\n          <ul className=\"history\">\n            {events.map((event) => renderEvent(event))}\n          </ul>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default InteractionHistory;"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,0BAA0B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAElC,KAAM,CAAAC,kBAAkB,CAAGC,IAAA,EAAqC,IAApC,CAAEC,MAAM,CAAEC,OAAO,CAAEC,UAAW,CAAC,CAAAH,IAAA,CACzD,KAAM,CAAAI,aAAa,CAAGA,CAAA,GAAM,CAC1B,OAAQD,UAAU,EAChB,IAAK,CAAAE,SAAS,CAACC,UAAU,CACvB,mBAAOV,IAAA,SAAMW,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CAAC,eAAa,CAAM,CAAC,CAC3E,IAAK,CAAAH,SAAS,CAACI,IAAI,CACjB,mBAAOb,IAAA,SAAMW,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,WAAS,CAAM,CAAC,CACjE,IAAK,CAAAH,SAAS,CAACK,OAAO,CACpB,mBAAOd,IAAA,SAAMW,SAAS,CAAC,0BAA0B,CAAAC,QAAA,CAAC,YAAU,CAAM,CAAC,CACrE,IAAK,CAAAH,SAAS,CAACM,MAAM,CACnB,mBAAOf,IAAA,SAAMW,SAAS,CAAC,yBAAyB,CAAAC,QAAA,CAAC,qBAAmB,CAAM,CAAC,CAC7E,QACE,mBAAOZ,IAAA,SAAMW,SAAS,CAAC,yBAAyB,CAAAC,QAAA,CAAC,qBAAmB,CAAM,CAAC,CAC/E,CACF,CAAC,CAED,KAAM,CAAAI,WAAW,CAAIC,KAAK,EAAK,KAAAC,cAAA,CAC7B,OAAQD,KAAK,CAACE,IAAI,EAChB,IAAK,kBAAkB,CACrB,mBACEjB,KAAA,OAAAU,QAAA,eACEV,KAAA,QAAKS,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BZ,IAAA,SAAMW,SAAS,CAAC,MAAM,CAAAC,QAAA,CAAEK,KAAK,CAACG,KAAK,CAAO,CAAC,cAC3CpB,IAAA,SAAMW,SAAS,CAAC,KAAK,CAAAC,QAAA,CAAEK,KAAK,CAACI,OAAO,CAACC,QAAQ,CAAO,CAAC,EAClD,CAAC,cACNpB,KAAA,QAAKS,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BZ,IAAA,SAAAY,QAAA,CAAOK,KAAK,CAACM,EAAE,CAAO,CAAC,cACvBvB,IAAA,SAAAY,QAAA,CAAOK,KAAK,CAACI,OAAO,CAACG,WAAW,CAAO,CAAC,cACxCtB,KAAA,SAAAU,QAAA,EAAM,YAAU,CAACK,KAAK,CAACI,OAAO,CAACI,QAAQ,EAAO,CAAC,EAC5C,CAAC,GATCR,KAAK,CAACS,EAUX,CAAC,CAET,IAAK,iBAAiB,CACpB,mBACExB,KAAA,OAAAU,QAAA,eACEV,KAAA,QAAKS,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BZ,IAAA,SAAMW,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAAC,QAAM,CAAM,CAAC,cAChDZ,IAAA,SAAMW,SAAS,CAAC,KAAK,CAAAC,QAAA,CAAE,EAAAM,cAAA,CAAAD,KAAK,CAACI,OAAO,UAAAH,cAAA,iBAAbA,cAAA,CAAeI,QAAQ,GAAI,eAAe,CAAO,CAAC,EACtE,CAAC,cACNpB,KAAA,QAAKS,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BZ,IAAA,SAAAY,QAAA,CAAOK,KAAK,CAACM,EAAE,CAAO,CAAC,cACvBvB,IAAA,QAAKW,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAC5BK,KAAK,CAACU,MAAM,CAACC,KAAK,CAAC,IAAI,CAAC,CAACC,GAAG,CAAC,CAACC,IAAI,CAAEC,CAAC,gBACpC/B,IAAA,MAAAY,QAAA,CAAYkB,IAAI,EAARC,CAAY,CACrB,CAAC,CACC,CAAC,EACH,CAAC,GAZCd,KAAK,CAACS,EAaX,CAAC,CAET,QACE,mBACExB,KAAA,OAAAU,QAAA,eACEZ,IAAA,QAAKW,SAAS,CAAC,eAAe,CAAAC,QAAA,cAC5BZ,IAAA,SAAMW,SAAS,CAAC,MAAM,CAAAC,QAAA,CAAEK,KAAK,CAACG,KAAK,EAAI,eAAe,CAAO,CAAC,CAC3D,CAAC,cACNlB,KAAA,QAAKS,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BZ,IAAA,SAAAY,QAAA,CAAOK,KAAK,CAACM,EAAE,CAAO,CAAC,cACvBvB,IAAA,QAAAY,QAAA,CAAMoB,IAAI,CAACC,SAAS,CAAChB,KAAK,CAACI,OAAO,CAAE,IAAI,CAAE,CAAC,CAAC,CAAM,CAAC,EAChD,CAAC,GAPCJ,KAAK,CAACS,EAQX,CAAC,CAEX,CACF,CAAC,CAED,mBACExB,KAAA,QAAKS,SAAS,CAAC,yBAAyB,CAAAC,QAAA,eACtCV,KAAA,QAAKgC,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEC,cAAc,CAAE,eAAe,CAAEC,UAAU,CAAE,QAAS,CAAE,CAAAzB,QAAA,eACrFZ,IAAA,OAAIW,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAC,qBAAmB,CAAI,CAAC,cACpDV,KAAA,QAAKgC,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEE,UAAU,CAAE,QAAS,CAAE,CAAAzB,QAAA,EACnDJ,aAAa,CAAC,CAAC,cAChBR,IAAA,WAAQsC,OAAO,CAAEhC,OAAQ,CAACK,SAAS,CAAC,WAAW,CAACuB,KAAK,CAAE,CAAEK,UAAU,CAAE,MAAO,CAAE,CAAA3B,QAAA,CAAC,eAAa,CAAQ,CAAC,EAClG,CAAC,EACH,CAAC,cACNZ,IAAA,QAAKW,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAC5BP,MAAM,CAACmC,MAAM,GAAK,CAAC,cAClBxC,IAAA,MAAGW,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAC,mDAAiD,CAAG,CAAC,cAE1EZ,IAAA,OAAIW,SAAS,CAAC,SAAS,CAAAC,QAAA,CACpBP,MAAM,CAACwB,GAAG,CAAEZ,KAAK,EAAKD,WAAW,CAACC,KAAK,CAAC,CAAC,CACxC,CACL,CACE,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAd,kBAAkB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}