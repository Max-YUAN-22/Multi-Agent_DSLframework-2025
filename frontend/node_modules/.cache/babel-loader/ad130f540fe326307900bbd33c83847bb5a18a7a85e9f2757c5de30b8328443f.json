{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useRef, useState, useCallback } from 'react';\nimport { io } from 'socket.io-client';\nconst useWebSocket = (url, onMessage) => {\n  _s();\n  const socket = useRef(null);\n  const [readyState, setReadyState] = useState('connecting');\n  const handleMessage = useCallback(message => {\n    onMessage(message);\n  }, [onMessage]);\n  useEffect(() => {\n    if (socket.current) {\n      return;\n    }\n    socket.current = io(url, {\n      transports: ['websocket']\n    });\n    socket.current.on('connect', () => {\n      setReadyState('open');\n    });\n    socket.current.on('message', handleMessage);\n    socket.current.on('workflow_update', handleMessage);\n    socket.current.on('connection_successful', handleMessage);\n    socket.current.on('disconnect', reason => {\n      console.log('WebSocket disconnected:', reason);\n      setReadyState('closed');\n    });\n    socket.current.on('connect_error', error => {\n      console.error('WebSocket connection error:', error);\n      setReadyState('closed');\n    });\n    return () => {\n      if (socket.current) {\n        console.log('Disconnecting WebSocket');\n        socket.current.disconnect();\n        socket.current = null;\n      }\n    };\n  }, [url, handleMessage]);\n  const sendMessage = useCallback(message => {\n    if (socket.current && socket.current.connected) {\n      socket.current.emit('message', message);\n    } else {\n      console.error('WebSocket is not connected.');\n    }\n  }, []);\n  return {\n    sendMessage,\n    readyState\n  };\n};\n_s(useWebSocket, \"JkoqrWPlsRi76i4sWVhOlf7/L84=\");\nexport default useWebSocket;","map":{"version":3,"names":["useEffect","useRef","useState","useCallback","io","useWebSocket","url","onMessage","_s","socket","readyState","setReadyState","handleMessage","message","current","transports","on","reason","console","log","error","disconnect","sendMessage","connected","emit"],"sources":["/Users/Apple/Desktop/multi-agent-dsl-final/frontend/src/hooks/useWebSocket.js"],"sourcesContent":["import { useEffect, useRef, useState, useCallback } from 'react';\nimport { io } from 'socket.io-client';\n\nconst useWebSocket = (url, onMessage) => {\n  const socket = useRef(null);\n  const [readyState, setReadyState] = useState('connecting');\n\n  const handleMessage = useCallback((message) => {\n    onMessage(message);\n  }, [onMessage]);\n\n  useEffect(() => {\n    if (socket.current) {\n      return;\n    }\n    \n    socket.current = io(url, { transports: ['websocket'] });\n\n    socket.current.on('connect', () => {\n      setReadyState('open');\n    });\n\n    socket.current.on('message', handleMessage);\n    socket.current.on('workflow_update', handleMessage);\n    socket.current.on('connection_successful', handleMessage);\n\n    socket.current.on('disconnect', (reason) => {\n      console.log('WebSocket disconnected:', reason);\n      setReadyState('closed');\n    });\n\n    socket.current.on('connect_error', (error) => {\n      console.error('WebSocket connection error:', error);\n      setReadyState('closed');\n    });\n\n    return () => {\n      if (socket.current) {\n        console.log('Disconnecting WebSocket');\n        socket.current.disconnect();\n        socket.current = null;\n      }\n    };\n  }, [url, handleMessage]);\n\n  const sendMessage = useCallback((message) => {\n    if (socket.current && socket.current.connected) {\n      socket.current.emit('message', message);\n    } else {\n      console.error('WebSocket is not connected.');\n    }\n  }, []);\n\n  return { sendMessage, readyState };\n};\n\nexport default useWebSocket;"],"mappings":";AAAA,SAASA,SAAS,EAAEC,MAAM,EAAEC,QAAQ,EAAEC,WAAW,QAAQ,OAAO;AAChE,SAASC,EAAE,QAAQ,kBAAkB;AAErC,MAAMC,YAAY,GAAGA,CAACC,GAAG,EAAEC,SAAS,KAAK;EAAAC,EAAA;EACvC,MAAMC,MAAM,GAAGR,MAAM,CAAC,IAAI,CAAC;EAC3B,MAAM,CAACS,UAAU,EAAEC,aAAa,CAAC,GAAGT,QAAQ,CAAC,YAAY,CAAC;EAE1D,MAAMU,aAAa,GAAGT,WAAW,CAAEU,OAAO,IAAK;IAC7CN,SAAS,CAACM,OAAO,CAAC;EACpB,CAAC,EAAE,CAACN,SAAS,CAAC,CAAC;EAEfP,SAAS,CAAC,MAAM;IACd,IAAIS,MAAM,CAACK,OAAO,EAAE;MAClB;IACF;IAEAL,MAAM,CAACK,OAAO,GAAGV,EAAE,CAACE,GAAG,EAAE;MAAES,UAAU,EAAE,CAAC,WAAW;IAAE,CAAC,CAAC;IAEvDN,MAAM,CAACK,OAAO,CAACE,EAAE,CAAC,SAAS,EAAE,MAAM;MACjCL,aAAa,CAAC,MAAM,CAAC;IACvB,CAAC,CAAC;IAEFF,MAAM,CAACK,OAAO,CAACE,EAAE,CAAC,SAAS,EAAEJ,aAAa,CAAC;IAC3CH,MAAM,CAACK,OAAO,CAACE,EAAE,CAAC,iBAAiB,EAAEJ,aAAa,CAAC;IACnDH,MAAM,CAACK,OAAO,CAACE,EAAE,CAAC,uBAAuB,EAAEJ,aAAa,CAAC;IAEzDH,MAAM,CAACK,OAAO,CAACE,EAAE,CAAC,YAAY,EAAGC,MAAM,IAAK;MAC1CC,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAEF,MAAM,CAAC;MAC9CN,aAAa,CAAC,QAAQ,CAAC;IACzB,CAAC,CAAC;IAEFF,MAAM,CAACK,OAAO,CAACE,EAAE,CAAC,eAAe,EAAGI,KAAK,IAAK;MAC5CF,OAAO,CAACE,KAAK,CAAC,6BAA6B,EAAEA,KAAK,CAAC;MACnDT,aAAa,CAAC,QAAQ,CAAC;IACzB,CAAC,CAAC;IAEF,OAAO,MAAM;MACX,IAAIF,MAAM,CAACK,OAAO,EAAE;QAClBI,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAC;QACtCV,MAAM,CAACK,OAAO,CAACO,UAAU,CAAC,CAAC;QAC3BZ,MAAM,CAACK,OAAO,GAAG,IAAI;MACvB;IACF,CAAC;EACH,CAAC,EAAE,CAACR,GAAG,EAAEM,aAAa,CAAC,CAAC;EAExB,MAAMU,WAAW,GAAGnB,WAAW,CAAEU,OAAO,IAAK;IAC3C,IAAIJ,MAAM,CAACK,OAAO,IAAIL,MAAM,CAACK,OAAO,CAACS,SAAS,EAAE;MAC9Cd,MAAM,CAACK,OAAO,CAACU,IAAI,CAAC,SAAS,EAAEX,OAAO,CAAC;IACzC,CAAC,MAAM;MACLK,OAAO,CAACE,KAAK,CAAC,6BAA6B,CAAC;IAC9C;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO;IAAEE,WAAW;IAAEZ;EAAW,CAAC;AACpC,CAAC;AAACF,EAAA,CAnDIH,YAAY;AAqDlB,eAAeA,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}