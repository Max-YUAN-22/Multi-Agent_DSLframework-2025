<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Agent DSL Framework - è™šæ‹Ÿå®ä¾‹æ¼”ç¤º</title>
    <link rel="stylesheet" href="virtual-demo.css">
</head>
<body>
    <header>
        <div class="container">
            <h1>Multi-Agent DSL Framework</h1>
            <p class="subtitle">è™šæ‹Ÿå®ä¾‹æ¼”ç¤º / Virtual Demo</p>
            <p class="description">æ— éœ€éƒ¨ç½²å³å¯ä½“éªŒç³»ç»ŸåŠŸèƒ½</p>
        </div>
    </header>

    <main>
        <section class="demo-controls">
            <div class="container">
                <h2>ç³»ç»Ÿæ§åˆ¶é¢æ¿ / System Control Panel</h2>
                <div class="control-grid">
                    <div class="control-card">
                        <h3>äº‹ä»¶æ¨¡æ‹Ÿå™¨ / Event Simulator</h3>
                        <div class="simulator-controls">
                            <button id="startSimulation" class="btn btn-primary">å¼€å§‹æ¨¡æ‹Ÿ / Start Simulation</button>
                            <button id="stopSimulation" class="btn btn-secondary" disabled>åœæ­¢æ¨¡æ‹Ÿ / Stop Simulation</button>
                            <button id="sendEvent" class="btn btn-accent">å‘é€äº‹ä»¶ / Send Event</button>
                        </div>
                        <div class="event-stats">
                            <div class="stat-item">
                                <span class="stat-label">å·²å‘é€äº‹ä»¶ / Events Sent:</span>
                                <span class="stat-value" id="eventsSent">0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">å¤„ç†ä¸­ / Processing:</span>
                                <span class="stat-value" id="processing">0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">å·²å®Œæˆ / Completed:</span>
                                <span class="stat-value" id="completed">0</span>
                            </div>
                        </div>
                    </div>

                    <div class="control-card">
                        <h3>æ™ºèƒ½ä½“çŠ¶æ€ / Agent Status</h3>
                        <div class="agent-grid">
                            <div class="agent-item" data-agent="perception">
                                <div class="agent-icon">ğŸ‘ï¸</div>
                                <div class="agent-info">
                                    <h4>æ„ŸçŸ¥æ™ºèƒ½ä½“ / Perception Agent</h4>
                                    <div class="agent-status active">æ´»è·ƒ / Active</div>
                                </div>
                            </div>
                            <div class="agent-item" data-agent="safety">
                                <div class="agent-icon">ğŸ›¡ï¸</div>
                                <div class="agent-info">
                                    <h4>å®‰å…¨æ™ºèƒ½ä½“ / Safety Agent</h4>
                                    <div class="agent-status active">æ´»è·ƒ / Active</div>
                                </div>
                            </div>
                            <div class="agent-item" data-agent="traffic">
                                <div class="agent-icon">ğŸš¦</div>
                                <div class="agent-info">
                                    <h4>äº¤é€šæ™ºèƒ½ä½“ / Traffic Agent</h4>
                                    <div class="agent-status active">æ´»è·ƒ / Active</div>
                                </div>
                            </div>
                            <div class="agent-item" data-agent="reroute">
                                <div class="agent-icon">ğŸ—ºï¸</div>
                                <div class="agent-info">
                                    <h4>é‡è·¯ç”±æ™ºèƒ½ä½“ / Reroute Agent</h4>
                                    <div class="agent-status standby">å¾…æœº / Standby</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="real-time-visualization">
            <div class="container">
                <h2>å®æ—¶å¯è§†åŒ– / Real-time Visualization</h2>
                <div class="visualization-grid">
                    <div class="chart-container">
                        <h3>äº‹ä»¶å¤„ç†å»¶è¿Ÿ / Event Processing Latency</h3>
                        <div class="chart" id="latencyChart">
                            <div class="chart-placeholder">
                                <div class="chart-line"></div>
                                <div class="chart-line"></div>
                                <div class="chart-line"></div>
                                <div class="chart-line"></div>
                                <div class="chart-line"></div>
                            </div>
                            <div class="chart-labels">
                                <span>0ms</span>
                                <span>100ms</span>
                                <span>200ms</span>
                                <span>300ms</span>
                                <span>400ms</span>
                            </div>
                        </div>
                    </div>

                    <div class="chart-container">
                        <h3>ç¼“å­˜å‘½ä¸­ç‡ / Cache Hit Rate</h3>
                        <div class="chart" id="cacheChart">
                            <div class="cache-meter">
                                <div class="cache-fill" id="cacheFill"></div>
                                <div class="cache-text" id="cacheText">85%</div>
                            </div>
                        </div>
                    </div>

                    <div class="chart-container">
                        <h3>ååé‡ / Throughput</h3>
                        <div class="chart" id="throughputChart">
                            <div class="throughput-bars">
                                <div class="bar" style="height: 60%"></div>
                                <div class="bar" style="height: 80%"></div>
                                <div class="bar" style="height: 45%"></div>
                                <div class="bar" style="height: 90%"></div>
                                <div class="bar" style="height: 70%"></div>
                                <div class="bar" style="height: 85%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="event-log">
            <div class="container">
                <div class="log-header-section">
                    <h2>ğŸ“Š äº¤äº’å†å² / Interaction History</h2>
                    <div class="log-controls">
                        <button id="clearLog" class="btn btn-small">æ¸…ç©ºæ—¥å¿— / Clear Log</button>
                        <button id="exportLog" class="btn btn-small">å¯¼å‡ºæ•°æ® / Export Data</button>
                        <div class="log-filter">
                            <select id="statusFilter">
                                <option value="all">æ‰€æœ‰çŠ¶æ€ / All Status</option>
                                <option value="completed">å·²å®Œæˆ / Completed</option>
                                <option value="processing">å¤„ç†ä¸­ / Processing</option>
                                <option value="pending">ç­‰å¾…ä¸­ / Pending</option>
                                <option value="failed">å¤±è´¥ / Failed</option>
                            </select>
                        </div>
                        <div class="log-search">
                            <input type="text" id="logSearch" placeholder="æœç´¢äº‹ä»¶... / Search events...">
                        </div>
                    </div>
                </div>
                <div class="log-container">
                    <div class="log-header">
                        <span class="sortable" data-sort="time">æ—¶é—´ / Time â°</span>
                        <span class="sortable" data-sort="type">äº‹ä»¶ç±»å‹ / Event Type ğŸ“‹</span>
                        <span class="sortable" data-sort="agent">æ™ºèƒ½ä½“ / Agent ğŸ¤–</span>
                        <span class="sortable" data-sort="status">çŠ¶æ€ / Status ğŸ¯</span>
                        <span class="sortable" data-sort="latency">å»¶è¿Ÿ / Latency âš¡</span>
                        <span>æ“ä½œ / Actions ğŸ”§</span>
                    </div>
                    <div class="log-content" id="logContent">
                        <div class="log-entry" data-status="completed" data-type="traffic" data-agent="perception">
                            <span class="time">14:32:15</span>
                            <span class="event-type">
                                <span class="event-icon">ğŸš—</span>
                                Traffic Incident
                            </span>
                            <span class="agent">
                                <span class="agent-icon">ğŸ‘ï¸</span>
                                Perception
                            </span>
                            <span class="status completed">
                                <span class="status-icon">âœ…</span>
                                Completed
                            </span>
                            <span class="latency good">45ms</span>
                            <span class="actions">
                                <button class="action-btn" onclick="viewEventDetails('evt_001')" title="æŸ¥çœ‹è¯¦æƒ… / View Details">ğŸ‘ï¸</button>
                                <button class="action-btn" onclick="replayEvent('evt_001')" title="é‡æ”¾ / Replay">ğŸ”„</button>
                            </span>
                        </div>
                        <div class="log-entry" data-status="processing" data-type="safety" data-agent="safety">
                            <span class="time">14:32:18</span>
                            <span class="event-type">
                                <span class="event-icon">âš ï¸</span>
                                Safety Alert
                            </span>
                            <span class="agent">
                                <span class="agent-icon">ğŸ›¡ï¸</span>
                                Safety
                            </span>
                            <span class="status processing">
                                <span class="status-icon">â³</span>
                                Processing
                            </span>
                            <span class="latency">-</span>
                            <span class="actions">
                                <button class="action-btn" onclick="viewEventDetails('evt_002')" title="æŸ¥çœ‹è¯¦æƒ… / View Details">ğŸ‘ï¸</button>
                                <button class="action-btn" onclick="cancelEvent('evt_002')" title="å–æ¶ˆ / Cancel">âŒ</button>
                            </span>
                        </div>
                        <div class="log-entry" data-status="pending" data-type="route" data-agent="reroute">
                            <span class="time">14:32:20</span>
                            <span class="event-type">
                                <span class="event-icon">ğŸ—ºï¸</span>
                                Route Update
                            </span>
                            <span class="agent">
                                <span class="agent-icon">ğŸ”„</span>
                                Reroute
                            </span>
                            <span class="status pending">
                                <span class="status-icon">â¸ï¸</span>
                                Pending
                            </span>
                            <span class="latency">-</span>
                            <span class="actions">
                                <button class="action-btn" onclick="viewEventDetails('evt_003')" title="æŸ¥çœ‹è¯¦æƒ… / View Details">ğŸ‘ï¸</button>
                                <button class="action-btn" onclick="prioritizeEvent('evt_003')" title="ä¼˜å…ˆå¤„ç† / Prioritize">âš¡</button>
                            </span>
                        </div>
                    </div>
                    <div class="log-summary">
                        <div class="summary-stats">
                            <span class="summary-item">
                                <span class="summary-label">æ€»äº‹ä»¶ / Total Events:</span>
                                <span class="summary-value" id="totalEvents">3</span>
                            </span>
                            <span class="summary-item">
                                <span class="summary-label">æˆåŠŸç‡ / Success Rate:</span>
                                <span class="summary-value" id="successRate">95.2%</span>
                            </span>
                            <span class="summary-item">
                                <span class="summary-label">å¹³å‡å»¶è¿Ÿ / Avg Latency:</span>
                                <span class="summary-value" id="avgLatency">67ms</span>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="performance-metrics">
            <div class="container">
                <h2>æ€§èƒ½æŒ‡æ ‡ / Performance Metrics</h2>
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-icon">âš¡</div>
                        <div class="metric-info">
                            <h3>å¹³å‡å»¶è¿Ÿ / Avg Latency</h3>
                            <div class="metric-value" id="avgLatency">67ms</div>
                            <div class="metric-trend positive">â†“ 12%</div>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-icon">ğŸ¯</div>
                        <div class="metric-info">
                            <h3>ç¼“å­˜å‘½ä¸­ç‡ / Cache Hit Rate</h3>
                            <div class="metric-value" id="cacheHitRate">85%</div>
                            <div class="metric-trend positive">â†‘ 5%</div>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-icon">ğŸ“Š</div>
                        <div class="metric-info">
                            <h3>ååé‡ / Throughput</h3>
                            <div class="metric-value" id="throughput">1,247/min</div>
                            <div class="metric-trend positive">â†‘ 8%</div>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-icon">âœ…</div>
                        <div class="metric-info">
                            <h3>æˆåŠŸç‡ / Success Rate</h3>
                            <div class="metric-value" id="successRate">98.7%</div>
                            <div class="metric-trend positive">â†‘ 2%</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 Multi-Agent DSL Framework. å¤šæ™ºèƒ½ä½“é¢†åŸŸç‰¹å®šè¯­è¨€æ¡†æ¶é¡¹ç›®</p>
            <p><a href="../index.html">è¿”å›ä¸»é¡µ / Back to Home</a></p>
        </div>
    </footer>

    <script>
        // æ¨¡æ‹Ÿæ•°æ®æ›´æ–°
        let simulationRunning = false;
        let eventCounter = 0;
        let processingCounter = 0;
        let completedCounter = 0;

        const eventTypes = ['Traffic Incident', 'Safety Alert', 'Route Update', 'Weather Change', 'Emergency'];
        const agents = ['Perception', 'Safety', 'Traffic', 'Reroute', 'Weather'];
        const statuses = ['Pending', 'Processing', 'Completed'];

        function updateStats() {
            document.getElementById('eventsSent').textContent = eventCounter;
            document.getElementById('processing').textContent = processingCounter;
            document.getElementById('completed').textContent = completedCounter;
        }

        function addLogEntry() {
            const logContent = document.getElementById('logContent');
            const now = new Date();
            const time = now.toTimeString().split(' ')[0];
            const eventType = eventTypes[Math.floor(Math.random() * eventTypes.length)];
            const agent = agents[Math.floor(Math.random() * agents.length)];
            const status = statuses[Math.floor(Math.random() * statuses.length)];
            const latency = status === 'Completed' ? Math.floor(Math.random() * 200) + 20 + 'ms' : '-';
            const eventId = 'evt_' + Date.now();

            // äº‹ä»¶å›¾æ ‡æ˜ å°„
            const eventIcons = {
                'Traffic Incident': 'ğŸš—',
                'Safety Alert': 'âš ï¸',
                'Route Update': 'ğŸ—ºï¸',
                'Weather Change': 'ğŸŒ¤ï¸',
                'Emergency': 'ğŸš¨'
            };

            // æ™ºèƒ½ä½“å›¾æ ‡æ˜ å°„
            const agentIcons = {
                'Perception': 'ğŸ‘ï¸',
                'Safety': 'ğŸ›¡ï¸',
                'Traffic': 'ğŸš¦',
                'Reroute': 'ğŸ”„',
                'Weather': 'ğŸŒ¦ï¸'
            };

            // çŠ¶æ€å›¾æ ‡æ˜ å°„
            const statusIcons = {
                'Completed': 'âœ…',
                'Processing': 'â³',
                'Pending': 'â¸ï¸'
            };

            const entry = document.createElement('div');
            entry.className = 'log-entry';
            entry.setAttribute('data-status', status.toLowerCase());
            entry.setAttribute('data-type', eventType.toLowerCase().replace(' ', '-'));
            entry.setAttribute('data-agent', agent.toLowerCase());
            entry.innerHTML = `
                <span class="time">${time}</span>
                <span class="event-type">
                    <span class="event-icon">${eventIcons[eventType]}</span>
                    ${eventType}
                </span>
                <span class="agent">
                    <span class="agent-icon">${agentIcons[agent]}</span>
                    ${agent}
                </span>
                <span class="status ${status.toLowerCase()}">
                    <span class="status-icon">${statusIcons[status]}</span>
                    ${status}
                </span>
                <span class="latency ${status === 'Completed' ? 'good' : ''}">${latency}</span>
                <span class="actions">
                    <button class="action-btn" onclick="viewEventDetails('${eventId}')" title="æŸ¥çœ‹è¯¦æƒ… / View Details">ğŸ‘ï¸</button>
                    ${status === 'Completed' ? `<button class="action-btn" onclick="replayEvent('${eventId}')" title="é‡æ”¾ / Replay">ğŸ”„</button>` : ''}
                    ${status === 'Processing' ? `<button class="action-btn" onclick="cancelEvent('${eventId}')" title="å–æ¶ˆ / Cancel">âŒ</button>` : ''}
                    ${status === 'Pending' ? `<button class="action-btn" onclick="prioritizeEvent('${eventId}')" title="ä¼˜å…ˆå¤„ç† / Prioritize">âš¡</button>` : ''}
                </span>
            `;

            logContent.insertBefore(entry, logContent.firstChild);
            
            // ä¿æŒæœ€å¤š20æ¡è®°å½•
            if (logContent.children.length > 20) {
                logContent.removeChild(logContent.lastChild);
            }

            // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
            updateLogSummary();
        }

        function updateMetrics() {
            // æ›´æ–°ç¼“å­˜å‘½ä¸­ç‡
            const cacheRate = 80 + Math.random() * 15;
            document.getElementById('cacheHitRate').textContent = Math.round(cacheRate) + '%';
            document.getElementById('cacheText').textContent = Math.round(cacheRate) + '%';
            document.getElementById('cacheFill').style.width = cacheRate + '%';

            // æ›´æ–°å¹³å‡å»¶è¿Ÿ
            const avgLatency = 50 + Math.random() * 50;
            document.getElementById('avgLatency').textContent = Math.round(avgLatency) + 'ms';

            // æ›´æ–°ååé‡
            const throughput = 1000 + Math.random() * 500;
            document.getElementById('throughput').textContent = Math.round(throughput) + '/min';

            // æ›´æ–°æˆåŠŸç‡
            const successRate = 95 + Math.random() * 4;
            document.getElementById('successRate').textContent = successRate.toFixed(1) + '%';
        }

        function simulateEvent() {
            if (!simulationRunning) return;

            eventCounter++;
            processingCounter++;
            updateStats();

            // æ¨¡æ‹Ÿå¤„ç†å»¶è¿Ÿ
            setTimeout(() => {
                processingCounter--;
                completedCounter++;
                updateStats();
                addLogEntry();
            }, Math.random() * 3000 + 500);

            // æ›´æ–°æŒ‡æ ‡
            updateMetrics();
        }

        // äº‹ä»¶ç›‘å¬å™¨
        document.getElementById('startSimulation').addEventListener('click', () => {
            simulationRunning = true;
            document.getElementById('startSimulation').disabled = true;
            document.getElementById('stopSimulation').disabled = false;
            
            // å¼€å§‹å®šæœŸå‘é€äº‹ä»¶
            const interval = setInterval(() => {
                if (simulationRunning) {
                    simulateEvent();
                } else {
                    clearInterval(interval);
                }
            }, 2000);
        });

        document.getElementById('stopSimulation').addEventListener('click', () => {
            simulationRunning = false;
            document.getElementById('startSimulation').disabled = false;
            document.getElementById('stopSimulation').disabled = true;
        });

        document.getElementById('sendEvent').addEventListener('click', () => {
            simulateEvent();
        });

        // æ–°å¢çš„äº¤äº’åŠŸèƒ½
        function updateLogSummary() {
            const logEntries = document.querySelectorAll('.log-entry');
            const totalEvents = logEntries.length;
            const completedEvents = document.querySelectorAll('.log-entry[data-status="completed"]').length;
            const successRate = totalEvents > 0 ? ((completedEvents / totalEvents) * 100).toFixed(1) : '0.0';
            
            // è®¡ç®—å¹³å‡å»¶è¿Ÿ
            const latencyElements = document.querySelectorAll('.latency.good');
            let totalLatency = 0;
            let latencyCount = 0;
            latencyElements.forEach(el => {
                const latency = parseInt(el.textContent);
                if (!isNaN(latency)) {
                    totalLatency += latency;
                    latencyCount++;
                }
            });
            const avgLatency = latencyCount > 0 ? Math.round(totalLatency / latencyCount) : 0;

            document.getElementById('totalEvents').textContent = totalEvents;
            document.getElementById('successRate').textContent = successRate + '%';
            document.getElementById('avgLatency').textContent = avgLatency + 'ms';
        }

        // æ¸…ç©ºæ—¥å¿—
        document.getElementById('clearLog').addEventListener('click', () => {
            if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰æ—¥å¿—è®°å½•å—ï¼Ÿ / Are you sure you want to clear all log entries?')) {
                document.getElementById('logContent').innerHTML = '';
                updateLogSummary();
            }
        });

        // å¯¼å‡ºæ•°æ®
        document.getElementById('exportLog').addEventListener('click', () => {
            const logEntries = document.querySelectorAll('.log-entry');
            const data = Array.from(logEntries).map(entry => ({
                time: entry.querySelector('.time').textContent,
                eventType: entry.querySelector('.event-type').textContent.trim(),
                agent: entry.querySelector('.agent').textContent.trim(),
                status: entry.querySelector('.status').textContent.trim(),
                latency: entry.querySelector('.latency').textContent
            }));
            
            const csvContent = "data:text/csv;charset=utf-8," 
                + "Time,Event Type,Agent,Status,Latency\n"
                + data.map(row => Object.values(row).join(',')).join('\n');
            
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "event_log_" + new Date().toISOString().split('T')[0] + ".csv");
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        });

        // çŠ¶æ€è¿‡æ»¤
        document.getElementById('statusFilter').addEventListener('change', (e) => {
            const filter = e.target.value;
            const entries = document.querySelectorAll('.log-entry');
            
            entries.forEach(entry => {
                if (filter === 'all' || entry.getAttribute('data-status') === filter) {
                    entry.style.display = 'grid';
                } else {
                    entry.style.display = 'none';
                }
            });
        });

        // æœç´¢åŠŸèƒ½
        document.getElementById('logSearch').addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase();
            const entries = document.querySelectorAll('.log-entry');
            
            entries.forEach(entry => {
                const eventType = entry.querySelector('.event-type').textContent.toLowerCase();
                const agent = entry.querySelector('.agent').textContent.toLowerCase();
                const status = entry.querySelector('.status').textContent.toLowerCase();
                
                if (eventType.includes(searchTerm) || agent.includes(searchTerm) || status.includes(searchTerm)) {
                    entry.style.display = 'grid';
                } else {
                    entry.style.display = 'none';
                }
            });
        });

        // æ’åºåŠŸèƒ½
        document.querySelectorAll('.sortable').forEach(header => {
            header.addEventListener('click', () => {
                const sortBy = header.getAttribute('data-sort');
                const entries = Array.from(document.querySelectorAll('.log-entry'));
                
                entries.sort((a, b) => {
                    let aValue, bValue;
                    
                    switch(sortBy) {
                        case 'time':
                            aValue = a.querySelector('.time').textContent;
                            bValue = b.querySelector('.time').textContent;
                            return aValue.localeCompare(bValue);
                        case 'type':
                            aValue = a.querySelector('.event-type').textContent.trim();
                            bValue = b.querySelector('.event-type').textContent.trim();
                            return aValue.localeCompare(bValue);
                        case 'agent':
                            aValue = a.querySelector('.agent').textContent.trim();
                            bValue = b.querySelector('.agent').textContent.trim();
                            return aValue.localeCompare(bValue);
                        case 'status':
                            aValue = a.querySelector('.status').textContent.trim();
                            bValue = b.querySelector('.status').textContent.trim();
                            return aValue.localeCompare(bValue);
                        case 'latency':
                            aValue = parseInt(a.querySelector('.latency').textContent) || 0;
                            bValue = parseInt(b.querySelector('.latency').textContent) || 0;
                            return aValue - bValue;
                        default:
                            return 0;
                    }
                });
                
                const logContent = document.getElementById('logContent');
                entries.forEach(entry => logContent.appendChild(entry));
            });
        });

        // äº‹ä»¶è¯¦æƒ…æŸ¥çœ‹
        function viewEventDetails(eventId) {
            alert(`æŸ¥çœ‹äº‹ä»¶è¯¦æƒ… / View Event Details\n\näº‹ä»¶ID / Event ID: ${eventId}\n\nè¿™é‡Œå°†æ˜¾ç¤ºäº‹ä»¶çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š\n- äº‹ä»¶æ•°æ® / Event Data\n- å¤„ç†æ­¥éª¤ / Processing Steps\n- æ€§èƒ½æŒ‡æ ‡ / Performance Metrics\n- ç›¸å…³æ—¥å¿— / Related Logs`);
        }

        // é‡æ”¾äº‹ä»¶
        function replayEvent(eventId) {
            if (confirm(`ç¡®å®šè¦é‡æ”¾äº‹ä»¶ ${eventId} å—ï¼Ÿ / Are you sure you want to replay event ${eventId}?`)) {
                simulateEvent();
                alert('äº‹ä»¶å·²é‡æ”¾ / Event replayed successfully!');
            }
        }

        // å–æ¶ˆäº‹ä»¶
        function cancelEvent(eventId) {
            if (confirm(`ç¡®å®šè¦å–æ¶ˆäº‹ä»¶ ${eventId} å—ï¼Ÿ / Are you sure you want to cancel event ${eventId}?`)) {
                // æ‰¾åˆ°å¯¹åº”çš„äº‹ä»¶å¹¶æ›´æ–°çŠ¶æ€
                const entries = document.querySelectorAll('.log-entry');
                entries.forEach(entry => {
                    const actionBtns = entry.querySelectorAll('.action-btn');
                    actionBtns.forEach(btn => {
                        if (btn.onclick && btn.onclick.toString().includes(eventId)) {
                            entry.querySelector('.status').innerHTML = '<span class="status-icon">âŒ</span> Cancelled';
                            entry.querySelector('.status').className = 'status cancelled';
                            entry.querySelector('.latency').textContent = '-';
                            entry.querySelector('.actions').innerHTML = '<button class="action-btn" onclick="viewEventDetails(\'' + eventId + '\')" title="æŸ¥çœ‹è¯¦æƒ… / View Details">ğŸ‘ï¸</button>';
                        }
                    });
                });
                updateLogSummary();
            }
        }

        // ä¼˜å…ˆå¤„ç†äº‹ä»¶
        function prioritizeEvent(eventId) {
            if (confirm(`ç¡®å®šè¦ä¼˜å…ˆå¤„ç†äº‹ä»¶ ${eventId} å—ï¼Ÿ / Are you sure you want to prioritize event ${eventId}?`)) {
                // æ‰¾åˆ°å¯¹åº”çš„äº‹ä»¶å¹¶ç§»åŠ¨åˆ°é¡¶éƒ¨
                const entries = document.querySelectorAll('.log-entry');
                entries.forEach(entry => {
                    const actionBtns = entry.querySelectorAll('.action-btn');
                    actionBtns.forEach(btn => {
                        if (btn.onclick && btn.onclick.toString().includes(eventId)) {
                            const logContent = document.getElementById('logContent');
                            logContent.insertBefore(entry, logContent.firstChild);
                            entry.querySelector('.status').innerHTML = '<span class="status-icon">âš¡</span> Prioritized';
                            entry.querySelector('.status').className = 'status prioritized';
                        }
                    });
                });
                alert('äº‹ä»¶å·²è®¾ç½®ä¸ºä¼˜å…ˆå¤„ç† / Event prioritized successfully!');
            }
        }

        // åˆå§‹åŒ–
        updateStats();
        updateMetrics();
        updateLogSummary();
    </script>
</body>
</html>
