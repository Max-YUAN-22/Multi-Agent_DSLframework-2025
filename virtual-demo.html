<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Agent DSL Framework - è™šæ‹Ÿå®ä¾‹æ¼”ç¤º</title>
    <link rel="stylesheet" href="virtual-demo.css">
</head>
<body>
    <header>
        <div class="container">
            <h1>Multi-Agent DSL Framework</h1>
            <p class="subtitle">è™šæ‹Ÿå®ä¾‹æ¼”ç¤º / Virtual Demo</p>
            <p class="description">æ— éœ€éƒ¨ç½²å³å¯ä½“éªŒç³»ç»ŸåŠŸèƒ½</p>
        </div>
    </header>

    <main>
        <section class="demo-controls">
            <div class="container">
                <h2>ç³»ç»Ÿæ§åˆ¶é¢æ¿ / System Control Panel</h2>
                <div class="control-grid">
                    <div class="control-card">
                        <h3>äº‹ä»¶æ¨¡æ‹Ÿå™¨ / Event Simulator</h3>
                        <div class="simulator-controls">
                            <button id="startSimulation" class="btn btn-primary">å¼€å§‹æ¨¡æ‹Ÿ / Start Simulation</button>
                            <button id="stopSimulation" class="btn btn-secondary" disabled>åœæ­¢æ¨¡æ‹Ÿ / Stop Simulation</button>
                            <button id="sendEvent" class="btn btn-accent">å‘é€äº‹ä»¶ / Send Event</button>
                        </div>
                        <div class="event-stats">
                            <div class="stat-item">
                                <span class="stat-label">å·²å‘é€äº‹ä»¶ / Events Sent:</span>
                                <span class="stat-value" id="eventsSent">0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">å¤„ç†ä¸­ / Processing:</span>
                                <span class="stat-value" id="processing">0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">å·²å®Œæˆ / Completed:</span>
                                <span class="stat-value" id="completed">0</span>
                            </div>
                        </div>
                    </div>

                    <div class="control-card">
                        <h3>æ™ºèƒ½ä½“çŠ¶æ€ / Agent Status</h3>
                        <div class="agent-grid">
                            <div class="agent-item" data-agent="perception">
                                <div class="agent-icon">ğŸ‘ï¸</div>
                                <div class="agent-info">
                                    <h4>æ„ŸçŸ¥æ™ºèƒ½ä½“ / Perception Agent</h4>
                                    <div class="agent-status active">æ´»è·ƒ / Active</div>
                                </div>
                            </div>
                            <div class="agent-item" data-agent="safety">
                                <div class="agent-icon">ğŸ›¡ï¸</div>
                                <div class="agent-info">
                                    <h4>å®‰å…¨æ™ºèƒ½ä½“ / Safety Agent</h4>
                                    <div class="agent-status active">æ´»è·ƒ / Active</div>
                                </div>
                            </div>
                            <div class="agent-item" data-agent="traffic">
                                <div class="agent-icon">ğŸš¦</div>
                                <div class="agent-info">
                                    <h4>äº¤é€šæ™ºèƒ½ä½“ / Traffic Agent</h4>
                                    <div class="agent-status active">æ´»è·ƒ / Active</div>
                                </div>
                            </div>
                            <div class="agent-item" data-agent="reroute">
                                <div class="agent-icon">ğŸ—ºï¸</div>
                                <div class="agent-info">
                                    <h4>é‡è·¯ç”±æ™ºèƒ½ä½“ / Reroute Agent</h4>
                                    <div class="agent-status standby">å¾…æœº / Standby</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="real-time-visualization">
            <div class="container">
                <h2>å®æ—¶å¯è§†åŒ– / Real-time Visualization</h2>
                <div class="visualization-grid">
                    <div class="chart-container">
                        <h3>äº‹ä»¶å¤„ç†å»¶è¿Ÿ / Event Processing Latency</h3>
                        <div class="chart" id="latencyChart">
                            <div class="chart-placeholder">
                                <div class="chart-line"></div>
                                <div class="chart-line"></div>
                                <div class="chart-line"></div>
                                <div class="chart-line"></div>
                                <div class="chart-line"></div>
                            </div>
                            <div class="chart-labels">
                                <span>0ms</span>
                                <span>100ms</span>
                                <span>200ms</span>
                                <span>300ms</span>
                                <span>400ms</span>
                            </div>
                        </div>
                    </div>

                    <div class="chart-container">
                        <h3>ç¼“å­˜å‘½ä¸­ç‡ / Cache Hit Rate</h3>
                        <div class="chart" id="cacheChart">
                            <div class="cache-meter">
                                <div class="cache-fill" id="cacheFill"></div>
                                <div class="cache-text" id="cacheText">85%</div>
                            </div>
                        </div>
                    </div>

                    <div class="chart-container">
                        <h3>ååé‡ / Throughput</h3>
                        <div class="chart" id="throughputChart">
                            <div class="throughput-bars">
                                <div class="bar" style="height: 60%"></div>
                                <div class="bar" style="height: 80%"></div>
                                <div class="bar" style="height: 45%"></div>
                                <div class="bar" style="height: 90%"></div>
                                <div class="bar" style="height: 70%"></div>
                                <div class="bar" style="height: 85%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="event-log">
            <div class="container">
                <h2>äº‹ä»¶æ—¥å¿— / Event Log</h2>
                <div class="log-container">
                    <div class="log-header">
                        <span>æ—¶é—´ / Time</span>
                        <span>äº‹ä»¶ç±»å‹ / Event Type</span>
                        <span>æ™ºèƒ½ä½“ / Agent</span>
                        <span>çŠ¶æ€ / Status</span>
                        <span>å»¶è¿Ÿ / Latency</span>
                    </div>
                    <div class="log-content" id="logContent">
                        <div class="log-entry">
                            <span class="time">14:32:15</span>
                            <span class="event-type">Traffic Incident</span>
                            <span class="agent">Perception</span>
                            <span class="status completed">Completed</span>
                            <span class="latency">45ms</span>
                        </div>
                        <div class="log-entry">
                            <span class="time">14:32:18</span>
                            <span class="event-type">Safety Alert</span>
                            <span class="agent">Safety</span>
                            <span class="status processing">Processing</span>
                            <span class="latency">-</span>
                        </div>
                        <div class="log-entry">
                            <span class="time">14:32:20</span>
                            <span class="event-type">Route Update</span>
                            <span class="agent">Reroute</span>
                            <span class="status pending">Pending</span>
                            <span class="latency">-</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="performance-metrics">
            <div class="container">
                <h2>æ€§èƒ½æŒ‡æ ‡ / Performance Metrics</h2>
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-icon">âš¡</div>
                        <div class="metric-info">
                            <h3>å¹³å‡å»¶è¿Ÿ / Avg Latency</h3>
                            <div class="metric-value" id="avgLatency">67ms</div>
                            <div class="metric-trend positive">â†“ 12%</div>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-icon">ğŸ¯</div>
                        <div class="metric-info">
                            <h3>ç¼“å­˜å‘½ä¸­ç‡ / Cache Hit Rate</h3>
                            <div class="metric-value" id="cacheHitRate">85%</div>
                            <div class="metric-trend positive">â†‘ 5%</div>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-icon">ğŸ“Š</div>
                        <div class="metric-info">
                            <h3>ååé‡ / Throughput</h3>
                            <div class="metric-value" id="throughput">1,247/min</div>
                            <div class="metric-trend positive">â†‘ 8%</div>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-icon">âœ…</div>
                        <div class="metric-info">
                            <h3>æˆåŠŸç‡ / Success Rate</h3>
                            <div class="metric-value" id="successRate">98.7%</div>
                            <div class="metric-trend positive">â†‘ 2%</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 Multi-Agent DSL Framework. å¤šæ™ºèƒ½ä½“é¢†åŸŸç‰¹å®šè¯­è¨€æ¡†æ¶é¡¹ç›®</p>
            <p><a href="../index.html">è¿”å›ä¸»é¡µ / Back to Home</a></p>
        </div>
    </footer>

    <script>
        // æ¨¡æ‹Ÿæ•°æ®æ›´æ–°
        let simulationRunning = false;
        let eventCounter = 0;
        let processingCounter = 0;
        let completedCounter = 0;

        const eventTypes = ['Traffic Incident', 'Safety Alert', 'Route Update', 'Weather Change', 'Emergency'];
        const agents = ['Perception', 'Safety', 'Traffic', 'Reroute', 'Weather'];
        const statuses = ['Pending', 'Processing', 'Completed'];

        function updateStats() {
            document.getElementById('eventsSent').textContent = eventCounter;
            document.getElementById('processing').textContent = processingCounter;
            document.getElementById('completed').textContent = completedCounter;
        }

        function addLogEntry() {
            const logContent = document.getElementById('logContent');
            const now = new Date();
            const time = now.toTimeString().split(' ')[0];
            const eventType = eventTypes[Math.floor(Math.random() * eventTypes.length)];
            const agent = agents[Math.floor(Math.random() * agents.length)];
            const status = statuses[Math.floor(Math.random() * statuses.length)];
            const latency = status === 'Completed' ? Math.floor(Math.random() * 200) + 20 + 'ms' : '-';

            const entry = document.createElement('div');
            entry.className = 'log-entry';
            entry.innerHTML = `
                <span class="time">${time}</span>
                <span class="event-type">${eventType}</span>
                <span class="agent">${agent}</span>
                <span class="status ${status.toLowerCase()}">${status}</span>
                <span class="latency">${latency}</span>
            `;

            logContent.insertBefore(entry, logContent.firstChild);
            
            // ä¿æŒæœ€å¤š20æ¡è®°å½•
            if (logContent.children.length > 20) {
                logContent.removeChild(logContent.lastChild);
            }
        }

        function updateMetrics() {
            // æ›´æ–°ç¼“å­˜å‘½ä¸­ç‡
            const cacheRate = 80 + Math.random() * 15;
            document.getElementById('cacheHitRate').textContent = Math.round(cacheRate) + '%';
            document.getElementById('cacheText').textContent = Math.round(cacheRate) + '%';
            document.getElementById('cacheFill').style.width = cacheRate + '%';

            // æ›´æ–°å¹³å‡å»¶è¿Ÿ
            const avgLatency = 50 + Math.random() * 50;
            document.getElementById('avgLatency').textContent = Math.round(avgLatency) + 'ms';

            // æ›´æ–°ååé‡
            const throughput = 1000 + Math.random() * 500;
            document.getElementById('throughput').textContent = Math.round(throughput) + '/min';

            // æ›´æ–°æˆåŠŸç‡
            const successRate = 95 + Math.random() * 4;
            document.getElementById('successRate').textContent = successRate.toFixed(1) + '%';
        }

        function simulateEvent() {
            if (!simulationRunning) return;

            eventCounter++;
            processingCounter++;
            updateStats();

            // æ¨¡æ‹Ÿå¤„ç†å»¶è¿Ÿ
            setTimeout(() => {
                processingCounter--;
                completedCounter++;
                updateStats();
                addLogEntry();
            }, Math.random() * 3000 + 500);

            // æ›´æ–°æŒ‡æ ‡
            updateMetrics();
        }

        // äº‹ä»¶ç›‘å¬å™¨
        document.getElementById('startSimulation').addEventListener('click', () => {
            simulationRunning = true;
            document.getElementById('startSimulation').disabled = true;
            document.getElementById('stopSimulation').disabled = false;
            
            // å¼€å§‹å®šæœŸå‘é€äº‹ä»¶
            const interval = setInterval(() => {
                if (simulationRunning) {
                    simulateEvent();
                } else {
                    clearInterval(interval);
                }
            }, 2000);
        });

        document.getElementById('stopSimulation').addEventListener('click', () => {
            simulationRunning = false;
            document.getElementById('startSimulation').disabled = false;
            document.getElementById('stopSimulation').disabled = true;
        });

        document.getElementById('sendEvent').addEventListener('click', () => {
            simulateEvent();
        });

        // åˆå§‹åŒ–
        updateStats();
        updateMetrics();
    </script>
</body>
</html>
